/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2025-11-10 13:04:43 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class contact_005fmanagement_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

private static org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_0;
private static org.apache.jasper.runtime.ProtectedFunctionMapper _jspx_fnmap_1;

static {
  _jspx_fnmap_0= org.apache.jasper.runtime.ProtectedFunctionMapper.getMapForFunction("fn:length", org.apache.taglibs.standard.functions.Functions.class, "length", new Class[] {java.lang.Object.class});
  _jspx_fnmap_1= org.apache.jasper.runtime.ProtectedFunctionMapper.getMapForFunction("fn:substring", org.apache.taglibs.standard.functions.Functions.class, "substring", new Class[] {java.lang.String.class, int.class, int.class});
}

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fchoose;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fotherwise;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005ffmt_005fformatDate_0026_005fvalue_005fpattern_005fnobody;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _005fjspx_005ftagPool_005fc_005fchoose = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fotherwise = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005ffmt_005fformatDate_0026_005fvalue_005fpattern_005fnobody = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
    _005fjspx_005ftagPool_005fc_005fchoose.release();
    _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.release();
    _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems.release();
    _005fjspx_005ftagPool_005fc_005fotherwise.release();
    _005fjspx_005ftagPool_005ffmt_005fformatDate_0026_005fvalue_005fpattern_005fnobody.release();
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");

    // Kiểm tra đăng nhập
    String username = (String) session.getAttribute("username");
    Boolean isLoggedIn = (Boolean) session.getAttribute("isLoggedIn");
    String userRole = (String) session.getAttribute("userRole");
    
    if (username == null || isLoggedIn == null || !isLoggedIn) {
        response.sendRedirect(request.getContextPath() + "/login.jsp");
        return;
    }
    
    // Kiểm tra quyền customer_support hoặc admin
    if (!"customer_support".equals(userRole) && !"admin".equals(userRole)) {
        response.sendRedirect(request.getContextPath() + "/index.jsp");
        return;
    }

      out.write("\n");
      out.write("<!DOCTYPE html>\n");
      out.write("<html>\n");
      out.write("<head>\n");
      out.write("    <meta charset=\"UTF-8\">\n");
      out.write("    <title>Quản Lý Liên Hệ | Bảng Điều Khiển</title>\n");
      out.write("    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>\n");
      out.write("    \n");
      out.write("    <!-- bootstrap 3.0.2 -->\n");
      out.write("    <link href=\"css/bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n");
      out.write("    <!-- font Awesome -->\n");
      out.write("    <link href=\"css/font-awesome.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n");
      out.write("    <!-- Ionicons -->\n");
      out.write("    <link href=\"css/ionicons.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n");
      out.write("    <!-- DataTables -->\n");
      out.write("    <link href=\"css/datatables/dataTables.bootstrap.css\" rel=\"stylesheet\" type=\"text/css\" />\n");
      out.write("    <!-- Theme style -->\n");
      out.write("    <link href=\"css/style.css\" rel=\"stylesheet\" type=\"text/css\" />\n");
      out.write("\n");
      out.write("    <style>\n");
      out.write("        .filter-section {\n");
      out.write("            background: #f9f9f9;\n");
      out.write("            padding: 15px;\n");
      out.write("            margin-bottom: 20px;\n");
      out.write("            border-radius: 5px;\n");
      out.write("        }\n");
      out.write("        .message-status-new { border-left: 4px solid #d9534f; }\n");
      out.write("        .message-status-replied { border-left: 4px solid #5cb85c; }\n");
      out.write("        .message-status-read { border-left: 4px solid #5bc0de; }\n");
      out.write("        \n");
      out.write("        .message-detail {\n");
      out.write("            white-space: pre-wrap;\n");
      out.write("            word-wrap: break-word;\n");
      out.write("            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;\n");
      out.write("            line-height: 1.6;\n");
      out.write("        }\n");
      out.write("    </style>\n");
      out.write("</head>\n");
      out.write("<body class=\"skin-black\">\n");
      out.write("    <!-- header logo: style can be found in header.less -->\n");
      out.write("    <header class=\"header\">\n");
      out.write("        <a href=\"contact-management\" class=\"logo\">\n");
      out.write("            Quản Lý Liên Hệ\n");
      out.write("        </a>\n");
      out.write("        <!-- Header Navbar: style can be found in header.less -->\n");
      out.write("        <nav class=\"navbar navbar-static-top\" role=\"navigation\">\n");
      out.write("            <!-- Sidebar toggle button-->\n");
      out.write("            <a href=\"#\" class=\"navbar-btn sidebar-toggle\" data-toggle=\"offcanvas\" role=\"button\">\n");
      out.write("                <span class=\"sr-only\">Toggle navigation</span>\n");
      out.write("                <span class=\"icon-bar\"></span>\n");
      out.write("                <span class=\"icon-bar\"></span>\n");
      out.write("                <span class=\"icon-bar\"></span>\n");
      out.write("            </a>\n");
      out.write("            <div class=\"navbar-right\">\n");
      out.write("                <ul class=\"nav navbar-nav\">\n");
      out.write("                    <!-- User Account: style can be found in dropdown.less -->\n");
      out.write("                    <li class=\"dropdown user user-menu\">\n");
      out.write("                        <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">\n");
      out.write("                            <i class=\"fa fa-user\"></i>\n");
      out.write("                            <span>");
      out.print( username );
      out.write(" <i class=\"caret\"></i></span>\n");
      out.write("                        </a>\n");
      out.write("                        <ul class=\"dropdown-menu dropdown-custom dropdown-menu-right\">\n");
      out.write("                            <li class=\"dropdown-header text-center\">Tài khoản</li>\n");
      out.write("                            <li>\n");
      out.write("                                <a href=\"profile.jsp\">\n");
      out.write("                                <i class=\"fa fa-user fa-fw pull-right\"></i>\n");
      out.write("                                    Hồ sơ\n");
      out.write("                                </a>\n");
      out.write("                                <a href=\"settings.jsp\">\n");
      out.write("                                <i class=\"fa fa-cog fa-fw pull-right\"></i>\n");
      out.write("                                    Cài đặt cá nhân\n");
      out.write("                                </a>\n");
      out.write("                            </li>\n");
      out.write("                            <li class=\"divider\"></li>\n");
      out.write("                            <li>\n");
      out.write("                                <a href=\"logout\"><i class=\"fa fa-ban fa-fw pull-right\"></i> Đăng xuất</a>\n");
      out.write("                            </li>\n");
      out.write("                        </ul>\n");
      out.write("                    </li>\n");
      out.write("                </ul>\n");
      out.write("            </div>\n");
      out.write("        </nav>\n");
      out.write("    </header>\n");
      out.write("    \n");
      out.write("    <div class=\"wrapper row-offcanvas row-offcanvas-left\">\n");
      out.write("        <!-- Left side column. contains the logo and sidebar -->\n");
      out.write("        <aside class=\"left-side sidebar-offcanvas\">\n");
      out.write("            <!-- sidebar: style can be found in sidebar.less -->\n");
      out.write("            <section class=\"sidebar\">\n");
      out.write("                <!-- Sidebar user panel -->\n");
      out.write("                <div class=\"user-panel\">\n");
      out.write("                    <div class=\"pull-left image\">\n");
      out.write("                        <img src=\"img/26115.jpg\" class=\"img-circle\" alt=\"User Image\" />\n");
      out.write("                    </div>\n");
      out.write("                    <div class=\"pull-left info\">\n");
      out.write("                        <p>Xin chào, ");
      out.print( username );
      out.write("</p>\n");
      out.write("                        <a href=\"#\"><i class=\"fa fa-circle text-success\"></i> Online</a>\n");
      out.write("                    </div>\n");
      out.write("                </div>\n");
      out.write("                <!-- sidebar menu: : style can be found in sidebar.less -->\n");
      out.write("                <ul class=\"sidebar-menu\">\n");
      out.write("                    <li>\n");
      out.write("                        <a href=\"customersupport.jsp\">\n");
      out.write("                            <i class=\"fa fa-dashboard\"></i> <span>Bảng điều khiển</span>\n");
      out.write("                        </a>\n");
      out.write("                    </li>\n");
      out.write("                    <li>\n");
      out.write("                        <a href=\"support-management\">\n");
      out.write("                            <i class=\"fa fa-ticket\"></i> <span>Quản lý yêu cầu hỗ trợ</span>\n");
      out.write("                            <small class=\"badge pull-right bg-red\" id=\"openTickets\">0</small>\n");
      out.write("                        </a>\n");
      out.write("                    </li>\n");
      out.write("                    <li>\n");
      out.write("                        <a href=\"feedback_management.jsp\">\n");
      out.write("                            <i class=\"fa fa-star\"></i> <span>Quản lý Feedback</span>\n");
      out.write("                        </a>\n");
      out.write("                    </li>\n");
      out.write("                    <li>\n");
      out.write("                        <a href=\"contracts.jsp\">\n");
      out.write("                            <i class=\"fa fa-file-text\"></i> <span>Hợp đồng khách hàng</span>\n");
      out.write("                        </a>\n");
      out.write("                    </li>\n");
      out.write("                    <li>\n");
      out.write("                        <a href=\"contact-management\">\n");
      out.write("                            <i class=\"fa fa-envelope\"></i> <span>Quản lý liên hệ</span>\n");
      out.write("                            <small class=\"badge pull-right bg-blue\" id=\"unreadContacts\">0</small>\n");
      out.write("                        </a>\n");
      out.write("                    </li>\n");
      out.write("                    <li class=\"active\">\n");
      out.write("                        <a href=\"customers\">\n");
      out.write("                            <i class=\"fa fa-users\"></i> <span>Quản lý khách hàng</span>\n");
      out.write("                        </a>\n");
      out.write("                    </li>\n");
      out.write("                </ul>\n");
      out.write("            </section>\n");
      out.write("            <!-- /.sidebar -->\n");
      out.write("        </aside>\n");
      out.write("\n");
      out.write("        <aside class=\"right-side\">\n");
      out.write("            <!-- Main content -->\n");
      out.write("            <section class=\"content\">\n");
      out.write("                <!-- Filter Section -->\n");
      out.write("                <div class=\"filter-section\">\n");
      out.write("                    <form method=\"GET\" action=\"contact-management\">\n");
      out.write("                        <div class=\"row\">\n");
      out.write("                            <div class=\"col-md-2\">\n");
      out.write("                                <label>Trạng thái:</label>\n");
      out.write("                                <select name=\"status\" class=\"form-control\">\n");
      out.write("                                    <option value=\"\">Tất cả</option>\n");
      out.write("                                    <option value=\"new\" ");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${param.status == 'new' ? 'selected' : ''}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write(">Mới</option>\n");
      out.write("                                    <option value=\"read\" ");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${param.status == 'read' ? 'selected' : ''}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write(">Đã đọc</option>\n");
      out.write("                                    <option value=\"replied\" ");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${param.status == 'replied' ? 'selected' : ''}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write(">Đã liên hệ </option>\n");
      out.write("                                </select>\n");
      out.write("                            </div>\n");
      out.write("                            <div class=\"col-md-3\">\n");
      out.write("                                <label>Tìm kiếm:</label>\n");
      out.write("                                <input type=\"text\" class=\"form-control\" name=\"q\" placeholder=\"ID, tên, email, SĐT, tin nhắn\" value=\"");
      out.print( request.getParameter("q") != null ? request.getParameter("q") : "" );
      out.write("\">\n");
      out.write("                            </div>\n");
      out.write("                            <div class=\"col-md-2\">\n");
      out.write("                                <label>Từ ngày:</label>\n");
      out.write("                                <input type=\"date\" name=\"startDate\" class=\"form-control\" value=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${param.startDate}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\">\n");
      out.write("                            </div>\n");
      out.write("                            <div class=\"col-md-2\">\n");
      out.write("                                <label>Đến ngày:</label>\n");
      out.write("                                <input type=\"date\" name=\"endDate\" class=\"form-control\" value=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${param.endDate}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\">\n");
      out.write("                            </div>\n");
      out.write("                            <div class=\"col-md-1\">\n");
      out.write("                                <label>Hiển thị:</label>\n");
      out.write("                                ");

                                    int _sz = 10;
                                    try { 
                                        String sp = request.getParameter("size"); 
                                        if (sp != null) _sz = Integer.parseInt(sp); 
                                    } catch (Exception ignored) {}
                                
      out.write("\n");
      out.write("                                <select name=\"size\" class=\"form-control\" onchange=\"this.form.submit()\">\n");
      out.write("                                    <option value=\"5\" ");
      out.print( _sz == 5 ? "selected" : "" );
      out.write(">5</option>\n");
      out.write("                                    <option value=\"10\" ");
      out.print( _sz == 10 ? "selected" : "" );
      out.write(">10</option>\n");
      out.write("                                    <option value=\"25\" ");
      out.print( _sz == 25 ? "selected" : "" );
      out.write(">25</option>\n");
      out.write("                                    <option value=\"50\" ");
      out.print( _sz == 50 ? "selected" : "" );
      out.write(">50</option>\n");
      out.write("                                    <option value=\"100\" ");
      out.print( _sz == 100 ? "selected" : "" );
      out.write(">100</option>\n");
      out.write("                                </select>\n");
      out.write("                            </div>\n");
      out.write("                            <div class=\"col-md-2\">\n");
      out.write("                                <label>&nbsp;</label><br>\n");
      out.write("                                <button type=\"submit\" class=\"btn btn-primary\">\n");
      out.write("                                    <i class=\"fa fa-filter\"></i> Lọc\n");
      out.write("                                </button>\n");
      out.write("                                <a href=\"contact-management\" class=\"btn btn-default\">\n");
      out.write("                                    <i class=\"fa fa-refresh\"></i> Xóa bộ lọc\n");
      out.write("                                </a>\n");
      out.write("                            </div>\n");
      out.write("                        </div>\n");
      out.write("                        <div class=\"row\" style=\"margin-top: 5px;\">\n");
      out.write("                            <div class=\"col-md-12 text-right\">\n");
      out.write("                                <span class=\"text-muted\">Tổng số: <strong>");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${totalMessages}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("</strong> tin nhắn</span>\n");
      out.write("                            </div>\n");
      out.write("                        </div>\n");
      out.write("                        <input type=\"hidden\" name=\"page\" value=\"1\">\n");
      out.write("                    </form>\n");
      out.write("                </div>\n");
      out.write("\n");
      out.write("                <!-- Messages Table -->\n");
      out.write("                <div class=\"row\">\n");
      out.write("                    <div class=\"col-md-12\">\n");
      out.write("                        <section class=\"panel\">\n");
      out.write("                            <header class=\"panel-heading\">\n");
      out.write("                                <h3>Danh sách liên hệ</h3>\n");
      out.write("                            </header>\n");
      out.write("                            <div class=\"panel-body\">\n");
      out.write("                                <div class=\"table-responsive\">\n");
      out.write("                                    <table id=\"messagesTable\" class=\"table table-striped table-bordered table-hover\">\n");
      out.write("                                        <thead>\n");
      out.write("                                            <tr>\n");
      out.write("                                                <th>ID</th>\n");
      out.write("                                                <th>Họ tên</th>\n");
      out.write("                                                <th>Email</th>\n");
      out.write("                                                <th>Số điện thoại</th>\n");
      out.write("                                                <th>Tin nhắn</th>\n");
      out.write("                                                <th>Trạng thái</th>\n");
      out.write("                                                <th>Ngày gửi</th>\n");
      out.write("                                                <th>Ngày phản hồi</th>\n");
      out.write("                                                <th>Thao tác</th>\n");
      out.write("                                            </tr>\n");
      out.write("                                        </thead>\n");
      out.write("                                        <tbody>\n");
      out.write("                                            ");
      if (_jspx_meth_c_005fchoose_005f0(_jspx_page_context))
        return;
      out.write("\n");
      out.write("                                        </tbody>\n");
      out.write("                                    </table>\n");
      out.write("                                </div>\n");
      out.write("                                \n");
      out.write("                                <!-- Phân trang -->\n");
      out.write("                                <div class=\"row\" style=\"margin-top: 10px;\">\n");
      out.write("                                    <div class=\"col-md-6\">\n");
      out.write("                                        <div class=\"text-muted\" style=\"line-height: 34px;\">\n");
      out.write("                                            ");

                                                int _currentPage = (Integer) request.getAttribute("currentPage");
                                                int _pageSize = (Integer) request.getAttribute("pageSize");
                                                int _total = (Integer) request.getAttribute("totalMessages");
                                                int _startIdx = (_currentPage - 1) * _pageSize + 1;
                                                int _endIdx = Math.min(_currentPage * _pageSize, _total);
                                                if (_total == 0) { 
                                                    _startIdx = 0; 
                                                    _endIdx = 0; 
                                                }
                                            
      out.write("\n");
      out.write("                                            Hiển thị ");
      out.print( _startIdx );
      out.write(' ');
      out.write('-');
      out.write(' ');
      out.print( _endIdx );
      out.write(" của ");
      out.print( _total );
      out.write(" tin nhắn\n");
      out.write("                                        </div>\n");
      out.write("                                    </div>\n");
      out.write("                                    <div class=\"col-md-6\">\n");
      out.write("                                        <nav aria-label=\"Phân trang tin nhắn\" class=\"pull-right\">\n");
      out.write("                                            <ul class=\"pagination pagination-sm\" style=\"margin: 0;\">\n");
      out.write("                                                ");

                                                    // Xây base query giữ nguyên filter
                                                    java.util.List<String> _p = new java.util.ArrayList<String>();
                                                    try { 
                                                        String v = request.getParameter("status"); 
                                                        if (v != null && !v.isEmpty()) 
                                                            _p.add("status=" + java.net.URLEncoder.encode(v, "UTF-8")); 
                                                    } catch (Exception ignored) {}
                                                    try { 
                                                        String v = request.getParameter("q"); 
                                                        if (v != null && !v.isEmpty()) 
                                                            _p.add("q=" + java.net.URLEncoder.encode(v, "UTF-8")); 
                                                    } catch (Exception ignored) {}
                                                    try { 
                                                        String v = request.getParameter("startDate"); 
                                                        if (v != null && !v.isEmpty()) 
                                                            _p.add("startDate=" + java.net.URLEncoder.encode(v, "UTF-8")); 
                                                    } catch (Exception ignored) {}
                                                    try { 
                                                        String v = request.getParameter("endDate"); 
                                                        if (v != null && !v.isEmpty()) 
                                                            _p.add("endDate=" + java.net.URLEncoder.encode(v, "UTF-8")); 
                                                    } catch (Exception ignored) {}
                                                    _p.add("size=" + _pageSize);
                                                    String _base = "contact-management" + (_p.isEmpty() ? "" : ("?" + String.join("&", _p)));
                                                    
                                                    int _totalPages = (Integer) request.getAttribute("totalPages");
                                                    
                                                    // Nút prev
                                                    int _prev = Math.max(1, _currentPage - 1);
                                                
      out.write("\n");
      out.write("                                                <li class=\"");
      out.print( _currentPage == 1 ? "disabled" : "" );
      out.write("\">\n");
      out.write("                                                    <a href=\"");
      out.print( _base + "&page=" + _prev );
      out.write("\">&laquo;</a>\n");
      out.write("                                                </li>\n");
      out.write("                                                ");

                                                    int _s = Math.max(1, _currentPage - 2);
                                                    int _e = Math.min(_totalPages, _currentPage + 2);
                                                    if (_s > 1) {
                                                
      out.write("\n");
      out.write("                                                <li><a href=\"");
      out.print( _base + "&page=1" );
      out.write("\">1</a></li>\n");
      out.write("                                                ");
      out.print( (_s > 2) ? "<li class=\"disabled\"><span>...</span></li>" : "" );
      out.write("\n");
      out.write("                                                ");

                                                    }
                                                    for (int i = _s; i <= _e; i++) {
                                                
      out.write("\n");
      out.write("                                                <li class=\"");
      out.print( i == _currentPage ? "active" : "" );
      out.write("\">\n");
      out.write("                                                    <a href=\"");
      out.print( _base + "&page=" + i );
      out.write('"');
      out.write('>');
      out.print( i );
      out.write("</a>\n");
      out.write("                                                </li>\n");
      out.write("                                                ");

                                                    }
                                                    if (_e < _totalPages) {
                                                
      out.write("\n");
      out.write("                                                ");
      out.print( (_e < _totalPages - 1) ? "<li class=\"disabled\"><span>...</span></li>" : "" );
      out.write("\n");
      out.write("                                                <li><a href=\"");
      out.print( _base + "&page=" + _totalPages );
      out.write('"');
      out.write('>');
      out.print( _totalPages );
      out.write("</a></li>\n");
      out.write("                                                ");

                                                    }
                                                    int _next = Math.min(_totalPages, _currentPage + 1);
                                                
      out.write("\n");
      out.write("                                                <li class=\"");
      out.print( _currentPage == _totalPages ? "disabled" : "" );
      out.write("\">\n");
      out.write("                                                    <a href=\"");
      out.print( _base + "&page=" + _next );
      out.write("\">&raquo;</a>\n");
      out.write("                                                </li>\n");
      out.write("                                            </ul>\n");
      out.write("                                        </nav>\n");
      out.write("                                    </div>\n");
      out.write("                                </div>\n");
      out.write("                            </div>\n");
      out.write("                        </section>\n");
      out.write("                    </div>\n");
      out.write("                </div>\n");
      out.write("            </section><!-- /.content -->\n");
      out.write("            <div class=\"footer-main\">\n");
      out.write("                Copyright &copy Hệ thống hỗ trợ khách hàng - HL Generator, 2025\n");
      out.write("            </div>\n");
      out.write("        </aside><!-- /.right-side -->\n");
      out.write("    </div><!-- ./wrapper -->\n");
      out.write("\n");
      out.write("    <!-- Modal xem chi tiết tin nhắn -->\n");
      out.write("    <div class=\"modal fade\" id=\"viewMessageModal\" tabindex=\"-1\" role=\"dialog\">\n");
      out.write("        <div class=\"modal-dialog modal-lg\" role=\"document\">\n");
      out.write("            <div class=\"modal-content\">\n");
      out.write("                <div class=\"modal-header\">\n");
      out.write("                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n");
      out.write("                        <span aria-hidden=\"true\">&times;</span>\n");
      out.write("                    </button>\n");
      out.write("                    <h4 class=\"modal-title\">Chi tiết tin nhắn liên hệ</h4>\n");
      out.write("                </div>\n");
      out.write("                <div class=\"modal-body\" id=\"messageDetailContent\">\n");
      out.write("                    <!-- Nội dung sẽ được load bằng JavaScript -->\n");
      out.write("                </div>\n");
      out.write("                <div class=\"modal-footer\">\n");
      out.write("                    <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Đóng</button>\n");
      out.write("                    <button type=\"button\" class=\"btn btn-primary\" id=\"btnMarkAsReplied\">Đánh dấu đã liên hệ </button>\n");
      out.write("                </div>\n");
      out.write("            </div>\n");
      out.write("        </div>\n");
      out.write("    </div>\n");
      out.write("\n");
      out.write("    <!-- Modal đánh dấu đã liên hệ -->\n");
      out.write("    <div class=\"modal fade\" id=\"markContactedModal\" tabindex=\"-1\" role=\"dialog\">\n");
      out.write("        <div class=\"modal-dialog modal-lg\" role=\"document\">\n");
      out.write("            <div class=\"modal-content\">\n");
      out.write("                <div class=\"modal-header\">\n");
      out.write("                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n");
      out.write("                        <span aria-hidden=\"true\">&times;</span>\n");
      out.write("                    </button>\n");
      out.write("                    <h4 class=\"modal-title\">Đánh dấu đã liên hệ</h4>\n");
      out.write("                </div>\n");
      out.write("                <div class=\"modal-body\" id=\"markContactedContent\">\n");
      out.write("                    <!-- Nội dung sẽ được load bằng JavaScript -->\n");
      out.write("                </div>\n");
      out.write("                <div class=\"modal-footer\">\n");
      out.write("                    <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Hủy</button>\n");
      out.write("                    <button type=\"button\" class=\"btn btn-primary\" id=\"btnConfirmContacted\">Xác nhận</button>\n");
      out.write("                </div>\n");
      out.write("            </div>\n");
      out.write("        </div>\n");
      out.write("    </div>\n");
      out.write("\n");
      out.write("    <!-- jQuery 2.0.2 -->\n");
      out.write("    <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js\"></script>\n");
      out.write("    <script src=\"js/jquery.min.js\" type=\"text/javascript\"></script>\n");
      out.write("    <!-- jQuery UI 1.10.3 -->\n");
      out.write("    <script src=\"js/jquery-ui-1.10.3.min.js\" type=\"text/javascript\"></script>\n");
      out.write("    <!-- Bootstrap -->\n");
      out.write("    <script src=\"js/bootstrap.min.js\" type=\"text/javascript\"></script>\n");
      out.write("    <!-- DataTables -->\n");
      out.write("    <script src=\"js/plugins/datatables/jquery.dataTables.js\" type=\"text/javascript\"></script>\n");
      out.write("    <script src=\"js/plugins/datatables/dataTables.bootstrap.js\" type=\"text/javascript\"></script>\n");
      out.write("    <!-- Director App -->\n");
      out.write("    <script src=\"js/Director/app.js\" type=\"text/javascript\"></script>\n");
      out.write("\n");
      out.write("    <script>\n");
      out.write("        var currentMessageId = null;\n");
      out.write("        var shouldReloadAfterModalClose = false;\n");
      out.write("        \n");
      out.write("        // Đảm bảo jQuery đã sẵn sàng\n");
      out.write("        $(document).ready(function() {\n");
      out.write("            console.log('Contact management script loaded');\n");
      out.write("            \n");
      out.write("            // Xử lý click button xem chi tiết\n");
      out.write("            $(document).on('click', '.view-message-btn', function(e) {\n");
      out.write("                e.preventDefault();\n");
      out.write("                e.stopPropagation();\n");
      out.write("                console.log('View button clicked');\n");
      out.write("                var $btn = $(this);\n");
      out.write("                var messageId = $btn.data('message-id');\n");
      out.write("                console.log('Message ID:', messageId, 'Button:', $btn);\n");
      out.write("                if (messageId) {\n");
      out.write("                    viewMessage(messageId, $btn);\n");
      out.write("                } else {\n");
      out.write("                    console.error('Message ID not found');\n");
      out.write("                    alert('Không tìm thấy ID tin nhắn');\n");
      out.write("                }\n");
      out.write("                return false;\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            // Xử lý click button đánh dấu đã đọc\n");
      out.write("            $(document).on('click', '.mark-read-btn', function(e) {\n");
      out.write("                e.preventDefault();\n");
      out.write("                e.stopPropagation();\n");
      out.write("                var messageId = $(this).data('message-id');\n");
      out.write("                updateStatus(messageId, 'read');\n");
      out.write("                return false;\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            // Xử lý click button đánh dấu đã liên hệ\n");
      out.write("            $(document).on('click', '.mark-replied-btn', function(e) {\n");
      out.write("                e.preventDefault();\n");
      out.write("                e.stopPropagation();\n");
      out.write("                var messageId = $(this).data('message-id');\n");
      out.write("                showMarkContactedModal(messageId);\n");
      out.write("                return false;\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            // Xác nhận đánh dấu đã liên hệ - sử dụng event delegation\n");
      out.write("            $(document).on('click', '#btnConfirmContacted', function(e) {\n");
      out.write("                e.preventDefault();\n");
      out.write("                e.stopPropagation();\n");
      out.write("                console.log('Confirm button clicked');\n");
      out.write("                \n");
      out.write("                var contactMethod = $('#contactMethod').val();\n");
      out.write("                var customerType = $('#customerType').val();\n");
      out.write("                var address = $('#address').val();\n");
      out.write("                var companyName = $('#companyName').val();\n");
      out.write("                var taxCode = $('#taxCode').val();\n");
      out.write("                \n");
      out.write("                // Validation: Kiểm tra phương thức liên hệ\n");
      out.write("                if (!contactMethod || contactMethod.trim() === '') {\n");
      out.write("                    alert('Vui lòng chọn phương thức liên hệ!');\n");
      out.write("                    return false;\n");
      out.write("                }\n");
      out.write("                \n");
      out.write("                // Nếu chọn \"Khác\", lấy giá trị từ input\n");
      out.write("                if (contactMethod === 'Khác') {\n");
      out.write("                    var otherMethod = $('#otherMethod').val();\n");
      out.write("                    if (!otherMethod || otherMethod.trim() === '') {\n");
      out.write("                        alert('Vui lòng nhập phương thức liên hệ!');\n");
      out.write("                        return false;\n");
      out.write("                    }\n");
      out.write("                    contactMethod = otherMethod.trim();\n");
      out.write("                }\n");
      out.write("                \n");
      out.write("                // Validation: Kiểm tra loại khách hàng\n");
      out.write("                if (!customerType || customerType.trim() === '') {\n");
      out.write("                    alert('Vui lòng chọn loại khách hàng!');\n");
      out.write("                    $('#customerType').focus();\n");
      out.write("                    return false;\n");
      out.write("                }\n");
      out.write("                \n");
      out.write("                // Validation: Nếu là doanh nghiệp, kiểm tra tên công ty\n");
      out.write("                if (customerType === 'company') {\n");
      out.write("                    if (!companyName || companyName.trim() === '') {\n");
      out.write("                        alert('Vui lòng nhập tên công ty!');\n");
      out.write("                        $('#companyName').focus();\n");
      out.write("                        return false;\n");
      out.write("                    }\n");
      out.write("                }\n");
      out.write("                \n");
      out.write("                // Gửi request cập nhật\n");
      out.write("                $.ajax({\n");
      out.write("                    url: 'contact-management',\n");
      out.write("                    type: 'POST',\n");
      out.write("                    data: {\n");
      out.write("                        action: 'updateStatus',\n");
      out.write("                        id: currentMessageId,\n");
      out.write("                        status: 'replied',\n");
      out.write("                        contactMethod: contactMethod,\n");
      out.write("                        address: address ? address.trim() : '',\n");
      out.write("                        customerType: customerType,\n");
      out.write("                        companyName: companyName ? companyName.trim() : '',\n");
      out.write("                        taxCode: taxCode ? taxCode.trim() : ''\n");
      out.write("                    },\n");
      out.write("                    dataType: 'json',\n");
      out.write("                    success: function(response) {\n");
      out.write("                        if (response.success) {\n");
      out.write("                            alert('✓ ' + response.message);\n");
      out.write("                            $('#markContactedModal').modal('hide');\n");
      out.write("                            location.reload();\n");
      out.write("                        } else {\n");
      out.write("                            alert('✗ ' + response.message);\n");
      out.write("                        }\n");
      out.write("                    },\n");
      out.write("                    error: function() {\n");
      out.write("                        alert('✗ Không thể cập nhật. Vui lòng thử lại!');\n");
      out.write("                    }\n");
      out.write("                });\n");
      out.write("                \n");
      out.write("                return false;\n");
      out.write("            });\n");
      out.write("        });\n");
      out.write("        \n");
      out.write("        // Xem chi tiết tin nhắn\n");
      out.write("        function viewMessage(messageId, $button) {\n");
      out.write("            console.log('viewMessage called with messageId:', messageId, 'button:', $button);\n");
      out.write("            currentMessageId = messageId;\n");
      out.write("            \n");
      out.write("            // Nếu không có button, tìm lại từ messageId\n");
      out.write("            if (!$button || $button.length === 0) {\n");
      out.write("                $button = $('.view-message-btn[data-message-id=\"' + messageId + '\"]');\n");
      out.write("                console.log('Button found by ID:', $button.length);\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            // Tìm dòng trong bảng - ưu tiên sử dụng closest từ button\n");
      out.write("            var row = null;\n");
      out.write("            if ($button && $button.length > 0) {\n");
      out.write("                row = $button.closest('tr');\n");
      out.write("                console.log('Row found by closest:', row.length);\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            // Nếu không tìm được bằng cách trên, thử tìm bằng ID\n");
      out.write("            if (!row || row.length === 0) {\n");
      out.write("                row = $('#messagesTable tbody tr').filter(function() {\n");
      out.write("                    var firstTdText = $(this).find('td:first').text().trim();\n");
      out.write("                    var match = firstTdText == messageId || parseInt(firstTdText) == messageId;\n");
      out.write("                    if (match) console.log('Row found by ID filter:', $(this).find('td:first').text());\n");
      out.write("                    return match;\n");
      out.write("                });\n");
      out.write("                console.log('Row found by ID filter:', row.length);\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            // Nếu vẫn không tìm được, thử tìm bằng data attribute\n");
      out.write("            if (!row || row.length === 0) {\n");
      out.write("                row = $('#messagesTable tbody tr').has('.view-message-btn[data-message-id=\"' + messageId + '\"]');\n");
      out.write("                console.log('Row found by has selector:', row.length);\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            if (!row || row.length === 0) {\n");
      out.write("                console.error('Không tìm thấy dòng cho messageId:', messageId);\n");
      out.write("                console.error('Total rows in table:', $('#messagesTable tbody tr').length);\n");
      out.write("                alert('Không tìm thấy tin nhắn với ID: ' + messageId);\n");
      out.write("                return;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            console.log('Row found successfully, columns:', row.find('td').length);\n");
      out.write("            \n");
      out.write("            // Lấy thông tin từ bảng\n");
      out.write("            var fullName = row.find('td:eq(1)').text().trim();\n");
      out.write("            var email = row.find('td:eq(2)').text().trim();\n");
      out.write("            var phone = row.find('td:eq(3)').text().trim();\n");
      out.write("            var message = row.find('td:eq(4)').text().trim();\n");
      out.write("            var status = row.find('td:eq(5) span').text().trim();\n");
      out.write("            var createdAt = row.find('td:eq(6)').text().trim();\n");
      out.write("            var repliedAt = row.find('td:eq(7)').text().trim();\n");
      out.write("            \n");
      out.write("            // Lấy các thông tin bổ sung từ data attribute của button (ưu tiên button được click)\n");
      out.write("            var $viewBtn = $button && $button.length > 0 ? $button : row.find('.view-message-btn');\n");
      out.write("            var contactMethod = String($viewBtn.data('contact-method') || '');\n");
      out.write("            var address = String($viewBtn.data('address') || '');\n");
      out.write("            var customerType = String($viewBtn.data('customer-type') || '');\n");
      out.write("            var companyName = String($viewBtn.data('company-name') || '');\n");
      out.write("            var taxCode = String($viewBtn.data('tax-code') || '');\n");
      out.write("            \n");
      out.write("            // Lấy toàn bộ nội dung tin nhắn (có thể cần gọi API)\n");
      out.write("            // Tạm thời dùng nội dung từ bảng\n");
      out.write("            var html = '<div class=\"row\">';\n");
      out.write("            html += '<div class=\"col-md-12\">';\n");
      out.write("            html += '<h5 style=\"margin-top: 0; margin-bottom: 20px; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;\">Thông tin liên hệ</h5>';\n");
      out.write("            html += '<div class=\"form-group\">';\n");
      out.write("            html += '<label>Họ tên:</label>';\n");
      out.write("            html += '<p class=\"form-control-static\"><strong>' + escapeHtml(fullName) + '</strong></p>';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '<div class=\"form-group\">';\n");
      out.write("            html += '<label>Email:</label>';\n");
      out.write("            html += '<p class=\"form-control-static\"><a href=\"mailto:' + escapeHtml(email) + '\">' + escapeHtml(email) + '</a></p>';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '<div class=\"form-group\">';\n");
      out.write("            html += '<label>Số điện thoại:</label>';\n");
      out.write("            html += '<p class=\"form-control-static\"><a href=\"tel:' + escapeHtml(phone) + '\">' + escapeHtml(phone) + '</a></p>';\n");
      out.write("            html += '</div>';\n");
      out.write("            if (address && String(address).trim() !== '') {\n");
      out.write("                html += '<div class=\"form-group\">';\n");
      out.write("                html += '<label>Địa chỉ:</label>';\n");
      out.write("                html += '<p class=\"form-control-static\">' + escapeHtml(String(address)) + '</p>';\n");
      out.write("                html += '</div>';\n");
      out.write("            }\n");
      out.write("            html += '<div class=\"form-group\">';\n");
      out.write("            html += '<label>Trạng thái:</label>';\n");
      out.write("            html += '<p class=\"form-control-static\"><span class=\"label label-' + (status === 'Mới' ? 'danger' : status === 'Đã liên hệ ' ? 'success' : 'info') + '\">' + escapeHtml(status) + '</span></p>';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '<div class=\"form-group\">';\n");
      out.write("            html += '<label>Ngày gửi:</label>';\n");
      out.write("            html += '<p class=\"form-control-static\">' + escapeHtml(createdAt) + '</p>';\n");
      out.write("            html += '</div>';\n");
      out.write("            if (repliedAt && repliedAt !== '-') {\n");
      out.write("                html += '<div class=\"form-group\">';\n");
      out.write("                html += '<label>Ngày phản hồi:</label>';\n");
      out.write("                html += '<p class=\"form-control-static\">' + escapeHtml(repliedAt) + '</p>';\n");
      out.write("                html += '</div>';\n");
      out.write("            }\n");
      out.write("            if (contactMethod && String(contactMethod).trim() !== '') {\n");
      out.write("                html += '<div class=\"form-group\">';\n");
      out.write("                html += '<label>Phương thức liên hệ:</label>';\n");
      out.write("                html += '<p class=\"form-control-static\"><span class=\"label label-info\">' + escapeHtml(String(contactMethod)) + '</span></p>';\n");
      out.write("                html += '</div>';\n");
      out.write("            }\n");
      out.write("            html += '<hr>';\n");
      out.write("            html += '<h5 style=\"margin-top: 0; margin-bottom: 20px; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;\">Thông tin khách hàng</h5>';\n");
      out.write("            if (customerType && String(customerType).trim() !== '') {\n");
      out.write("                html += '<div class=\"form-group\">';\n");
      out.write("                html += '<label>Loại khách hàng:</label>';\n");
      out.write("                var customerTypeLabel = String(customerType) === 'company' ? 'Doanh nghiệp' : 'Cá nhân';\n");
      out.write("                html += '<p class=\"form-control-static\"><span class=\"label label-primary\">' + escapeHtml(customerTypeLabel) + '</span></p>';\n");
      out.write("                html += '</div>';\n");
      out.write("            }\n");
      out.write("            if (companyName && String(companyName).trim() !== '') {\n");
      out.write("                html += '<div class=\"form-group\">';\n");
      out.write("                html += '<label>Tên công ty:</label>';\n");
      out.write("                html += '<p class=\"form-control-static\"><strong>' + escapeHtml(String(companyName)) + '</strong></p>';\n");
      out.write("                html += '</div>';\n");
      out.write("            }\n");
      out.write("            if (taxCode && String(taxCode).trim() !== '') {\n");
      out.write("                html += '<div class=\"form-group\">';\n");
      out.write("                html += '<label>Mã số thuế:</label>';\n");
      out.write("                html += '<p class=\"form-control-static\">' + escapeHtml(String(taxCode)) + '</p>';\n");
      out.write("                html += '</div>';\n");
      out.write("            }\n");
      out.write("            html += '<hr>';\n");
      out.write("            html += '<div class=\"form-group\">';\n");
      out.write("            html += '<label>Nội dung tin nhắn:</label>';\n");
      out.write("            html += '<div class=\"message-detail\" style=\"background: #f9f9f9; padding: 15px; border-radius: 5px; border: 1px solid #ddd;\">';\n");
      out.write("            html += escapeHtml(message);\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '</div>';\n");
      out.write("            \n");
      out.write("            $('#messageDetailContent').html(html);\n");
      out.write("            \n");
      out.write("            // Nếu chưa đọc, tự động đánh dấu đã đọc sau khi modal hiển thị\n");
      out.write("            var isNewMessage = (status === 'Mới');\n");
      out.write("            \n");
      out.write("            // Đăng ký event một lần để xử lý cập nhật trạng thái\n");
      out.write("            $('#viewMessageModal').off('shown.bs.modal.viewMessage').on('shown.bs.modal.viewMessage', function() {\n");
      out.write("                if (isNewMessage) {\n");
      out.write("                    updateStatus(messageId, 'read', false, false);\n");
      out.write("                }\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            // Hiển thị modal\n");
      out.write("            $('#viewMessageModal').modal('show');\n");
      out.write("        }\n");
      out.write("        \n");
      out.write("        // Cập nhật trạng thái\n");
      out.write("        function updateStatus(messageId, status, showAlert, reload) {\n");
      out.write("            if (showAlert === undefined) showAlert = true;\n");
      out.write("            if (reload === undefined) reload = true;\n");
      out.write("            \n");
      out.write("            if (showAlert && !confirm('Bạn có chắc muốn cập nhật trạng thái?')) {\n");
      out.write("                return;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            $.ajax({\n");
      out.write("                url: 'contact-management',\n");
      out.write("                type: 'POST',\n");
      out.write("                data: {\n");
      out.write("                    action: 'updateStatus',\n");
      out.write("                    id: messageId,\n");
      out.write("                    status: status\n");
      out.write("                },\n");
      out.write("                dataType: 'json',\n");
      out.write("                success: function(response) {\n");
      out.write("                    if (response.success) {\n");
      out.write("                        if (showAlert) {\n");
      out.write("                            alert('✓ ' + response.message);\n");
      out.write("                        }\n");
      out.write("                        // Chỉ reload nếu được yêu cầu\n");
      out.write("                        if (reload) {\n");
      out.write("                            location.reload();\n");
      out.write("                        } else {\n");
      out.write("                            // Nếu đang mở modal, đánh dấu để reload sau khi đóng\n");
      out.write("                            if ($('#viewMessageModal').hasClass('in') || $('#viewMessageModal').is(':visible')) {\n");
      out.write("                                shouldReloadAfterModalClose = true;\n");
      out.write("                            } else {\n");
      out.write("                                location.reload();\n");
      out.write("                            }\n");
      out.write("                        }\n");
      out.write("                    } else {\n");
      out.write("                        alert('✗ ' + response.message);\n");
      out.write("                    }\n");
      out.write("                },\n");
      out.write("                error: function() {\n");
      out.write("                    alert('✗ Không thể cập nhật. Vui lòng thử lại!');\n");
      out.write("                }\n");
      out.write("            });\n");
      out.write("        }\n");
      out.write("        \n");
      out.write("        // Đánh dấu đã phản hồi từ modal xem chi tiết\n");
      out.write("        $('#btnMarkAsReplied').click(function() {\n");
      out.write("            if (currentMessageId) {\n");
      out.write("                $('#viewMessageModal').modal('hide');\n");
      out.write("                showMarkContactedModal(currentMessageId);\n");
      out.write("            }\n");
      out.write("        });\n");
      out.write("        \n");
      out.write("        // Hiển thị modal đánh dấu đã liên hệ\n");
      out.write("        function showMarkContactedModal(messageId) {\n");
      out.write("            currentMessageId = messageId;\n");
      out.write("            \n");
      out.write("            // Tìm dòng trong bảng\n");
      out.write("            var row = $('#messagesTable tbody tr').filter(function() {\n");
      out.write("                return $(this).find('td:first').text() == messageId;\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            if (row.length === 0) {\n");
      out.write("                alert('Không tìm thấy tin nhắn');\n");
      out.write("                return;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            // Lấy thông tin từ bảng\n");
      out.write("            var fullName = row.find('td:eq(1)').text().trim();\n");
      out.write("            var email = row.find('td:eq(2)').text().trim();\n");
      out.write("            var phone = row.find('td:eq(3)').text().trim();\n");
      out.write("            var message = row.find('td:eq(4)').text().trim();\n");
      out.write("            var status = row.find('td:eq(5) span').text().trim();\n");
      out.write("            var createdAt = row.find('td:eq(6)').text().trim();\n");
      out.write("            \n");
      out.write("            // Tạo HTML với thông tin đầy đủ và form\n");
      out.write("            var html = '<div class=\"row\">';\n");
      out.write("            html += '<div class=\"col-md-12\">';\n");
      out.write("            html += '<h5 style=\"margin-top: 0; margin-bottom: 20px; color: #333;\">Thông tin liên hệ</h5>';\n");
      out.write("            html += '<div class=\"form-group\">';\n");
      out.write("            html += '<label>Họ tên:</label>';\n");
      out.write("            html += '<p class=\"form-control-static\"><strong>' + escapeHtml(fullName) + '</strong></p>';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '<div class=\"form-group\">';\n");
      out.write("            html += '<label>Email:</label>';\n");
      out.write("            html += '<p class=\"form-control-static\"><a href=\"mailto:' + escapeHtml(email) + '\">' + escapeHtml(email) + '</a></p>';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '<div class=\"form-group\">';\n");
      out.write("            html += '<label>Số điện thoại:</label>';\n");
      out.write("            html += '<p class=\"form-control-static\"><a href=\"tel:' + escapeHtml(phone) + '\">' + escapeHtml(phone) + '</a></p>';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '<div class=\"form-group\">';\n");
      out.write("            html += '<label>Nội dung tin nhắn:</label>';\n");
      out.write("            html += '<div class=\"message-detail\" style=\"background: #f9f9f9; padding: 15px; border-radius: 5px; border: 1px solid #ddd; max-height: 150px; overflow-y: auto;\">';\n");
      out.write("            html += escapeHtml(message);\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '<div class=\"form-group\">';\n");
      out.write("            html += '<label>Ngày gửi:</label>';\n");
      out.write("            html += '<p class=\"form-control-static\">' + escapeHtml(createdAt) + '</p>';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '<hr>';\n");
      out.write("            html += '<h5 style=\"margin-top: 0; margin-bottom: 20px; color: #333;\">Thông tin bổ sung</h5>';\n");
      out.write("            html += '<div class=\"form-group\">';\n");
      out.write("            html += '<label for=\"address\">Địa chỉ:</label>';\n");
      out.write("            html += '<input type=\"text\" class=\"form-control\" id=\"address\" placeholder=\"Nhập địa chỉ\" maxlength=\"500\">';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '<div class=\"form-group\">';\n");
      out.write("            html += '<label for=\"customerType\">Loại khách hàng: <span style=\"color: red;\">*</span></label>';\n");
      out.write("            html += '<select class=\"form-control\" id=\"customerType\" required>';\n");
      out.write("            html += '<option value=\"\">-- Chọn loại khách hàng --</option>';\n");
      out.write("            html += '<option value=\"individual\">Cá nhân</option>';\n");
      out.write("            html += '<option value=\"company\">Doanh nghiệp</option>';\n");
      out.write("            html += '</select>';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '<div class=\"form-group\" id=\"companyFieldsGroup\" style=\"display: none;\">';\n");
      out.write("            html += '<label for=\"companyName\">Tên công ty: <span style=\"color: red;\">*</span></label>';\n");
      out.write("            html += '<input type=\"text\" class=\"form-control\" id=\"companyName\" placeholder=\"Nhập tên công ty\" maxlength=\"255\">';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '<div class=\"form-group\" id=\"taxCodeFieldsGroup\" style=\"display: none;\">';\n");
      out.write("            html += '<label for=\"taxCode\">Mã số thuế:</label>';\n");
      out.write("            html += '<input type=\"text\" class=\"form-control\" id=\"taxCode\" placeholder=\"Nhập mã số thuế\" maxlength=\"50\">';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '<hr>';\n");
      out.write("            html += '<div class=\"form-group\">';\n");
      out.write("            html += '<label for=\"contactMethod\">Đã liên hệ bằng gì? <span style=\"color: red;\">*</span></label>';\n");
      out.write("            html += '<select class=\"form-control\" id=\"contactMethod\" required>';\n");
      out.write("            html += '<option value=\"\">-- Chọn phương thức liên hệ --</option>';\n");
      out.write("            html += '<option value=\"Email\">Email</option>';\n");
      out.write("            html += '<option value=\"Điện thoại\">Điện thoại</option>';\n");
      out.write("            html += '<option value=\"Tin nhắn\">Tin nhắn</option>';\n");
      out.write("            html += '<option value=\"Trực tiếp\">Trực tiếp</option>';\n");
      out.write("            html += '<option value=\"Khác\">Khác</option>';\n");
      out.write("            html += '</select>';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '<div class=\"form-group\" id=\"otherMethodGroup\" style=\"display: none;\">';\n");
      out.write("            html += '<label for=\"otherMethod\">Mô tả phương thức khác:</label>';\n");
      out.write("            html += '<input type=\"text\" class=\"form-control\" id=\"otherMethod\" placeholder=\"Nhập phương thức liên hệ\">';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '</div>';\n");
      out.write("            html += '</div>';\n");
      out.write("            \n");
      out.write("            $('#markContactedContent').html(html);\n");
      out.write("            \n");
      out.write("            // Xử lý khi chọn loại khách hàng - sử dụng off để tránh đăng ký nhiều lần\n");
      out.write("            $('#customerType').off('change').on('change', function() {\n");
      out.write("                var customerType = $(this).val();\n");
      out.write("                if (customerType === 'company') {\n");
      out.write("                    $('#companyFieldsGroup').show();\n");
      out.write("                    $('#taxCodeFieldsGroup').show();\n");
      out.write("                    $('#companyName').prop('required', true);\n");
      out.write("                } else {\n");
      out.write("                    $('#companyFieldsGroup').hide();\n");
      out.write("                    $('#taxCodeFieldsGroup').hide();\n");
      out.write("                    $('#companyName').prop('required', false);\n");
      out.write("                    $('#taxCode').prop('required', false);\n");
      out.write("                    $('#companyName').val('');\n");
      out.write("                    $('#taxCode').val('');\n");
      out.write("                }\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            // Xử lý khi chọn \"Khác\" - sử dụng off để tránh đăng ký nhiều lần\n");
      out.write("            $('#contactMethod').off('change').on('change', function() {\n");
      out.write("                if ($(this).val() === 'Khác') {\n");
      out.write("                    $('#otherMethodGroup').show();\n");
      out.write("                    $('#otherMethod').prop('required', true);\n");
      out.write("                } else {\n");
      out.write("                    $('#otherMethodGroup').hide();\n");
      out.write("                    $('#otherMethod').prop('required', false);\n");
      out.write("                    $('#otherMethod').val('');\n");
      out.write("                }\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            // Hiển thị modal\n");
      out.write("            $('#markContactedModal').modal('show');\n");
      out.write("        }\n");
      out.write("        \n");
      out.write("        \n");
      out.write("        // Hàm escape HTML\n");
      out.write("        function escapeHtml(text) {\n");
      out.write("            var map = {\n");
      out.write("                '&': '&amp;',\n");
      out.write("                '<': '&lt;',\n");
      out.write("                '>': '&gt;',\n");
      out.write("                '\"': '&quot;',\n");
      out.write("                \"'\": '&#039;'\n");
      out.write("            };\n");
      out.write("            return text.replace(/[&<>\"']/g, function(m) { return map[m]; });\n");
      out.write("        }\n");
      out.write("    </script>\n");
      out.write("</body>\n");
      out.write("</html>\n");
      out.write("\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }

  private boolean _jspx_meth_c_005fchoose_005f0(javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:choose
    org.apache.taglibs.standard.tag.common.core.ChooseTag _jspx_th_c_005fchoose_005f0 = (org.apache.taglibs.standard.tag.common.core.ChooseTag) _005fjspx_005ftagPool_005fc_005fchoose.get(org.apache.taglibs.standard.tag.common.core.ChooseTag.class);
    _jspx_th_c_005fchoose_005f0.setPageContext(_jspx_page_context);
    _jspx_th_c_005fchoose_005f0.setParent(null);
    int _jspx_eval_c_005fchoose_005f0 = _jspx_th_c_005fchoose_005f0.doStartTag();
    if (_jspx_eval_c_005fchoose_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
      do {
        out.write("\n");
        out.write("                                                ");
        if (_jspx_meth_c_005fwhen_005f0(_jspx_th_c_005fchoose_005f0, _jspx_page_context))
          return true;
        out.write("\n");
        out.write("                                                ");
        if (_jspx_meth_c_005fotherwise_005f3(_jspx_th_c_005fchoose_005f0, _jspx_page_context))
          return true;
        out.write("\n");
        out.write("                                            ");
        int evalDoAfterBody = _jspx_th_c_005fchoose_005f0.doAfterBody();
        if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
          break;
      } while (true);
    }
    if (_jspx_th_c_005fchoose_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005fc_005fchoose.reuse(_jspx_th_c_005fchoose_005f0);
      return true;
    }
    _005fjspx_005ftagPool_005fc_005fchoose.reuse(_jspx_th_c_005fchoose_005f0);
    return false;
  }

  private boolean _jspx_meth_c_005fwhen_005f0(javax.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f0, javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:when
    org.apache.taglibs.standard.tag.rt.core.WhenTag _jspx_th_c_005fwhen_005f0 = (org.apache.taglibs.standard.tag.rt.core.WhenTag) _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.WhenTag.class);
    _jspx_th_c_005fwhen_005f0.setPageContext(_jspx_page_context);
    _jspx_th_c_005fwhen_005f0.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f0);
    // /contact_management.jsp(248,48) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
    _jspx_th_c_005fwhen_005f0.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${not empty messages}", java.lang.Boolean.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false)).booleanValue());
    int _jspx_eval_c_005fwhen_005f0 = _jspx_th_c_005fwhen_005f0.doStartTag();
    if (_jspx_eval_c_005fwhen_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
      do {
        out.write("\n");
        out.write("                                                    ");
        if (_jspx_meth_c_005fforEach_005f0(_jspx_th_c_005fwhen_005f0, _jspx_page_context))
          return true;
        out.write("\n");
        out.write("                                                ");
        int evalDoAfterBody = _jspx_th_c_005fwhen_005f0.doAfterBody();
        if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
          break;
      } while (true);
    }
    if (_jspx_th_c_005fwhen_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f0);
      return true;
    }
    _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f0);
    return false;
  }

  private boolean _jspx_meth_c_005fforEach_005f0(javax.servlet.jsp.tagext.JspTag _jspx_th_c_005fwhen_005f0, javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:forEach
    org.apache.taglibs.standard.tag.rt.core.ForEachTag _jspx_th_c_005fforEach_005f0 = (org.apache.taglibs.standard.tag.rt.core.ForEachTag) _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems.get(org.apache.taglibs.standard.tag.rt.core.ForEachTag.class);
    _jspx_th_c_005fforEach_005f0.setPageContext(_jspx_page_context);
    _jspx_th_c_005fforEach_005f0.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fwhen_005f0);
    // /contact_management.jsp(249,52) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
    _jspx_th_c_005fforEach_005f0.setVar("message");
    // /contact_management.jsp(249,52) name = items type = javax.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
    _jspx_th_c_005fforEach_005f0.setItems(new org.apache.jasper.el.JspValueExpression("/contact_management.jsp(249,52) '${messages}'",_el_expressionfactory.createValueExpression(_jspx_page_context.getELContext(),"${messages}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
    int[] _jspx_push_body_count_c_005fforEach_005f0 = new int[] { 0 };
    try {
      int _jspx_eval_c_005fforEach_005f0 = _jspx_th_c_005fforEach_005f0.doStartTag();
      if (_jspx_eval_c_005fforEach_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\n");
          out.write("                                                        <tr class=\"message-status-");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.status}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
          out.write("\">\n");
          out.write("                                                            <td>");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.id}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
          out.write("</td>\n");
          out.write("                                                            <td><strong>");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.fullName}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
          out.write("</strong></td>\n");
          out.write("                                                            <td>");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.email}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
          out.write("</td>\n");
          out.write("                                                            <td>");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.phone}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
          out.write("</td>\n");
          out.write("                                                            <td>\n");
          out.write("                                                                ");
          if (_jspx_meth_c_005fchoose_005f1(_jspx_th_c_005fforEach_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\n");
          out.write("                                                            </td>\n");
          out.write("                                                            <td>\n");
          out.write("                                                                ");
          if (_jspx_meth_c_005fchoose_005f2(_jspx_th_c_005fforEach_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\n");
          out.write("                                                            </td>\n");
          out.write("                                                            <td>\n");
          out.write("                                                                ");
          if (_jspx_meth_fmt_005fformatDate_005f0(_jspx_th_c_005fforEach_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\n");
          out.write("                                                            </td>\n");
          out.write("                                                            <td>\n");
          out.write("                                                                ");
          if (_jspx_meth_c_005fchoose_005f3(_jspx_th_c_005fforEach_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\n");
          out.write("                                                            </td>\n");
          out.write("                                                            <td>\n");
          out.write("                                                                <button class=\"btn btn-info btn-xs view-message-btn\" \n");
          out.write("                                                                        data-message-id=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.id}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
          out.write("\" \n");
          out.write("                                                                        data-contact-method=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.contactMethod != null ? message.contactMethod : ''}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
          out.write("\"\n");
          out.write("                                                                        data-address=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.address != null ? message.address : ''}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
          out.write("\"\n");
          out.write("                                                                        data-customer-type=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.customerType != null ? message.customerType : ''}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
          out.write("\"\n");
          out.write("                                                                        data-company-name=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.companyName != null ? message.companyName : ''}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
          out.write("\"\n");
          out.write("                                                                        data-tax-code=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.taxCode != null ? message.taxCode : ''}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
          out.write("\"\n");
          out.write("                                                                        title=\"Xem chi tiết\">\n");
          out.write("                                                                    <i class=\"fa fa-eye\"></i> Xem\n");
          out.write("                                                                </button>\n");
          out.write("                                                                <button class=\"btn btn-primary btn-xs mark-replied-btn\" data-message-id=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.id}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
          out.write("\" title=\"Đánh dấu đã liên hệ\">\n");
          out.write("                                                                    <i class=\"fa fa-reply\"></i> Đã liên hệ\n");
          out.write("                                                                </button>\n");
          out.write("                                                            </td>\n");
          out.write("                                                        </tr>\n");
          out.write("                                                    ");
          int evalDoAfterBody = _jspx_th_c_005fforEach_005f0.doAfterBody();
          if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fforEach_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
    } catch (java.lang.Throwable _jspx_exception) {
      while (_jspx_push_body_count_c_005fforEach_005f0[0]-- > 0)
        out = _jspx_page_context.popBody();
      _jspx_th_c_005fforEach_005f0.doCatch(_jspx_exception);
    } finally {
      _jspx_th_c_005fforEach_005f0.doFinally();
      _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems.reuse(_jspx_th_c_005fforEach_005f0);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fchoose_005f1(javax.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f0, javax.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:choose
    org.apache.taglibs.standard.tag.common.core.ChooseTag _jspx_th_c_005fchoose_005f1 = (org.apache.taglibs.standard.tag.common.core.ChooseTag) _005fjspx_005ftagPool_005fc_005fchoose.get(org.apache.taglibs.standard.tag.common.core.ChooseTag.class);
    _jspx_th_c_005fchoose_005f1.setPageContext(_jspx_page_context);
    _jspx_th_c_005fchoose_005f1.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f0);
    int _jspx_eval_c_005fchoose_005f1 = _jspx_th_c_005fchoose_005f1.doStartTag();
    if (_jspx_eval_c_005fchoose_005f1 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
      do {
        out.write("\n");
        out.write("                                                                    ");
        if (_jspx_meth_c_005fwhen_005f1(_jspx_th_c_005fchoose_005f1, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
          return true;
        out.write("\n");
        out.write("                                                                    ");
        if (_jspx_meth_c_005fotherwise_005f0(_jspx_th_c_005fchoose_005f1, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
          return true;
        out.write("\n");
        out.write("                                                                ");
        int evalDoAfterBody = _jspx_th_c_005fchoose_005f1.doAfterBody();
        if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
          break;
      } while (true);
    }
    if (_jspx_th_c_005fchoose_005f1.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005fc_005fchoose.reuse(_jspx_th_c_005fchoose_005f1);
      return true;
    }
    _005fjspx_005ftagPool_005fc_005fchoose.reuse(_jspx_th_c_005fchoose_005f1);
    return false;
  }

  private boolean _jspx_meth_c_005fwhen_005f1(javax.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f1, javax.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:when
    org.apache.taglibs.standard.tag.rt.core.WhenTag _jspx_th_c_005fwhen_005f1 = (org.apache.taglibs.standard.tag.rt.core.WhenTag) _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.WhenTag.class);
    _jspx_th_c_005fwhen_005f1.setPageContext(_jspx_page_context);
    _jspx_th_c_005fwhen_005f1.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f1);
    // /contact_management.jsp(257,68) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
    _jspx_th_c_005fwhen_005f1.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${fn:length(message.message) > 50}", java.lang.Boolean.class, (javax.servlet.jsp.PageContext)_jspx_page_context, _jspx_fnmap_0, false)).booleanValue());
    int _jspx_eval_c_005fwhen_005f1 = _jspx_th_c_005fwhen_005f1.doStartTag();
    if (_jspx_eval_c_005fwhen_005f1 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
      do {
        out.write("\n");
        out.write("                                                                        ");
        out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${fn:substring(message.message, 0, 50)}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, _jspx_fnmap_1, false));
        out.write("...\n");
        out.write("                                                                    ");
        int evalDoAfterBody = _jspx_th_c_005fwhen_005f1.doAfterBody();
        if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
          break;
      } while (true);
    }
    if (_jspx_th_c_005fwhen_005f1.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f1);
      return true;
    }
    _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f1);
    return false;
  }

  private boolean _jspx_meth_c_005fotherwise_005f0(javax.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f1, javax.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:otherwise
    org.apache.taglibs.standard.tag.common.core.OtherwiseTag _jspx_th_c_005fotherwise_005f0 = (org.apache.taglibs.standard.tag.common.core.OtherwiseTag) _005fjspx_005ftagPool_005fc_005fotherwise.get(org.apache.taglibs.standard.tag.common.core.OtherwiseTag.class);
    _jspx_th_c_005fotherwise_005f0.setPageContext(_jspx_page_context);
    _jspx_th_c_005fotherwise_005f0.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f1);
    int _jspx_eval_c_005fotherwise_005f0 = _jspx_th_c_005fotherwise_005f0.doStartTag();
    if (_jspx_eval_c_005fotherwise_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
      do {
        out.write("\n");
        out.write("                                                                        ");
        out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.message}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
        out.write("\n");
        out.write("                                                                    ");
        int evalDoAfterBody = _jspx_th_c_005fotherwise_005f0.doAfterBody();
        if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
          break;
      } while (true);
    }
    if (_jspx_th_c_005fotherwise_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005fc_005fotherwise.reuse(_jspx_th_c_005fotherwise_005f0);
      return true;
    }
    _005fjspx_005ftagPool_005fc_005fotherwise.reuse(_jspx_th_c_005fotherwise_005f0);
    return false;
  }

  private boolean _jspx_meth_c_005fchoose_005f2(javax.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f0, javax.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:choose
    org.apache.taglibs.standard.tag.common.core.ChooseTag _jspx_th_c_005fchoose_005f2 = (org.apache.taglibs.standard.tag.common.core.ChooseTag) _005fjspx_005ftagPool_005fc_005fchoose.get(org.apache.taglibs.standard.tag.common.core.ChooseTag.class);
    _jspx_th_c_005fchoose_005f2.setPageContext(_jspx_page_context);
    _jspx_th_c_005fchoose_005f2.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f0);
    int _jspx_eval_c_005fchoose_005f2 = _jspx_th_c_005fchoose_005f2.doStartTag();
    if (_jspx_eval_c_005fchoose_005f2 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
      do {
        out.write("\n");
        out.write("                                                                    ");
        if (_jspx_meth_c_005fwhen_005f2(_jspx_th_c_005fchoose_005f2, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
          return true;
        out.write("\n");
        out.write("                                                                    ");
        if (_jspx_meth_c_005fwhen_005f3(_jspx_th_c_005fchoose_005f2, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
          return true;
        out.write("\n");
        out.write("                                                                    ");
        if (_jspx_meth_c_005fwhen_005f4(_jspx_th_c_005fchoose_005f2, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
          return true;
        out.write("\n");
        out.write("                                                                    ");
        if (_jspx_meth_c_005fotherwise_005f1(_jspx_th_c_005fchoose_005f2, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
          return true;
        out.write("\n");
        out.write("                                                                ");
        int evalDoAfterBody = _jspx_th_c_005fchoose_005f2.doAfterBody();
        if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
          break;
      } while (true);
    }
    if (_jspx_th_c_005fchoose_005f2.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005fc_005fchoose.reuse(_jspx_th_c_005fchoose_005f2);
      return true;
    }
    _005fjspx_005ftagPool_005fc_005fchoose.reuse(_jspx_th_c_005fchoose_005f2);
    return false;
  }

  private boolean _jspx_meth_c_005fwhen_005f2(javax.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f2, javax.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:when
    org.apache.taglibs.standard.tag.rt.core.WhenTag _jspx_th_c_005fwhen_005f2 = (org.apache.taglibs.standard.tag.rt.core.WhenTag) _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.WhenTag.class);
    _jspx_th_c_005fwhen_005f2.setPageContext(_jspx_page_context);
    _jspx_th_c_005fwhen_005f2.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f2);
    // /contact_management.jsp(267,68) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
    _jspx_th_c_005fwhen_005f2.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.status == 'new'}", java.lang.Boolean.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false)).booleanValue());
    int _jspx_eval_c_005fwhen_005f2 = _jspx_th_c_005fwhen_005f2.doStartTag();
    if (_jspx_eval_c_005fwhen_005f2 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
      do {
        out.write("\n");
        out.write("                                                                        <span class=\"label label-danger\">Mới</span>\n");
        out.write("                                                                    ");
        int evalDoAfterBody = _jspx_th_c_005fwhen_005f2.doAfterBody();
        if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
          break;
      } while (true);
    }
    if (_jspx_th_c_005fwhen_005f2.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f2);
      return true;
    }
    _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f2);
    return false;
  }

  private boolean _jspx_meth_c_005fwhen_005f3(javax.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f2, javax.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:when
    org.apache.taglibs.standard.tag.rt.core.WhenTag _jspx_th_c_005fwhen_005f3 = (org.apache.taglibs.standard.tag.rt.core.WhenTag) _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.WhenTag.class);
    _jspx_th_c_005fwhen_005f3.setPageContext(_jspx_page_context);
    _jspx_th_c_005fwhen_005f3.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f2);
    // /contact_management.jsp(270,68) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
    _jspx_th_c_005fwhen_005f3.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.status == 'read'}", java.lang.Boolean.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false)).booleanValue());
    int _jspx_eval_c_005fwhen_005f3 = _jspx_th_c_005fwhen_005f3.doStartTag();
    if (_jspx_eval_c_005fwhen_005f3 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
      do {
        out.write("\n");
        out.write("                                                                        <span class=\"label label-info\">Đã đọc</span>\n");
        out.write("                                                                    ");
        int evalDoAfterBody = _jspx_th_c_005fwhen_005f3.doAfterBody();
        if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
          break;
      } while (true);
    }
    if (_jspx_th_c_005fwhen_005f3.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f3);
      return true;
    }
    _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f3);
    return false;
  }

  private boolean _jspx_meth_c_005fwhen_005f4(javax.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f2, javax.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:when
    org.apache.taglibs.standard.tag.rt.core.WhenTag _jspx_th_c_005fwhen_005f4 = (org.apache.taglibs.standard.tag.rt.core.WhenTag) _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.WhenTag.class);
    _jspx_th_c_005fwhen_005f4.setPageContext(_jspx_page_context);
    _jspx_th_c_005fwhen_005f4.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f2);
    // /contact_management.jsp(273,68) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
    _jspx_th_c_005fwhen_005f4.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.status == 'replied'}", java.lang.Boolean.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false)).booleanValue());
    int _jspx_eval_c_005fwhen_005f4 = _jspx_th_c_005fwhen_005f4.doStartTag();
    if (_jspx_eval_c_005fwhen_005f4 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
      do {
        out.write("\n");
        out.write("                                                                        <span class=\"label label-success\">Đã liên hệ </span>\n");
        out.write("                                                                    ");
        int evalDoAfterBody = _jspx_th_c_005fwhen_005f4.doAfterBody();
        if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
          break;
      } while (true);
    }
    if (_jspx_th_c_005fwhen_005f4.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f4);
      return true;
    }
    _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f4);
    return false;
  }

  private boolean _jspx_meth_c_005fotherwise_005f1(javax.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f2, javax.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:otherwise
    org.apache.taglibs.standard.tag.common.core.OtherwiseTag _jspx_th_c_005fotherwise_005f1 = (org.apache.taglibs.standard.tag.common.core.OtherwiseTag) _005fjspx_005ftagPool_005fc_005fotherwise.get(org.apache.taglibs.standard.tag.common.core.OtherwiseTag.class);
    _jspx_th_c_005fotherwise_005f1.setPageContext(_jspx_page_context);
    _jspx_th_c_005fotherwise_005f1.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f2);
    int _jspx_eval_c_005fotherwise_005f1 = _jspx_th_c_005fotherwise_005f1.doStartTag();
    if (_jspx_eval_c_005fotherwise_005f1 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
      do {
        out.write("\n");
        out.write("                                                                        <span class=\"label label-default\">");
        out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.status}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
        out.write("</span>\n");
        out.write("                                                                    ");
        int evalDoAfterBody = _jspx_th_c_005fotherwise_005f1.doAfterBody();
        if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
          break;
      } while (true);
    }
    if (_jspx_th_c_005fotherwise_005f1.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005fc_005fotherwise.reuse(_jspx_th_c_005fotherwise_005f1);
      return true;
    }
    _005fjspx_005ftagPool_005fc_005fotherwise.reuse(_jspx_th_c_005fotherwise_005f1);
    return false;
  }

  private boolean _jspx_meth_fmt_005fformatDate_005f0(javax.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f0, javax.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  fmt:formatDate
    org.apache.taglibs.standard.tag.rt.fmt.FormatDateTag _jspx_th_fmt_005fformatDate_005f0 = (org.apache.taglibs.standard.tag.rt.fmt.FormatDateTag) _005fjspx_005ftagPool_005ffmt_005fformatDate_0026_005fvalue_005fpattern_005fnobody.get(org.apache.taglibs.standard.tag.rt.fmt.FormatDateTag.class);
    _jspx_th_fmt_005fformatDate_005f0.setPageContext(_jspx_page_context);
    _jspx_th_fmt_005fformatDate_005f0.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f0);
    // /contact_management.jsp(282,64) name = value type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
    _jspx_th_fmt_005fformatDate_005f0.setValue((java.util.Date) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.createdAt}", java.util.Date.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
    // /contact_management.jsp(282,64) name = pattern type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
    _jspx_th_fmt_005fformatDate_005f0.setPattern("dd/MM/yyyy HH:mm");
    int _jspx_eval_fmt_005fformatDate_005f0 = _jspx_th_fmt_005fformatDate_005f0.doStartTag();
    if (_jspx_th_fmt_005fformatDate_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005ffmt_005fformatDate_0026_005fvalue_005fpattern_005fnobody.reuse(_jspx_th_fmt_005fformatDate_005f0);
      return true;
    }
    _005fjspx_005ftagPool_005ffmt_005fformatDate_0026_005fvalue_005fpattern_005fnobody.reuse(_jspx_th_fmt_005fformatDate_005f0);
    return false;
  }

  private boolean _jspx_meth_c_005fchoose_005f3(javax.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f0, javax.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:choose
    org.apache.taglibs.standard.tag.common.core.ChooseTag _jspx_th_c_005fchoose_005f3 = (org.apache.taglibs.standard.tag.common.core.ChooseTag) _005fjspx_005ftagPool_005fc_005fchoose.get(org.apache.taglibs.standard.tag.common.core.ChooseTag.class);
    _jspx_th_c_005fchoose_005f3.setPageContext(_jspx_page_context);
    _jspx_th_c_005fchoose_005f3.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f0);
    int _jspx_eval_c_005fchoose_005f3 = _jspx_th_c_005fchoose_005f3.doStartTag();
    if (_jspx_eval_c_005fchoose_005f3 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
      do {
        out.write("\n");
        out.write("                                                                    ");
        if (_jspx_meth_c_005fwhen_005f5(_jspx_th_c_005fchoose_005f3, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
          return true;
        out.write("\n");
        out.write("                                                                    ");
        if (_jspx_meth_c_005fotherwise_005f2(_jspx_th_c_005fchoose_005f3, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
          return true;
        out.write("\n");
        out.write("                                                                ");
        int evalDoAfterBody = _jspx_th_c_005fchoose_005f3.doAfterBody();
        if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
          break;
      } while (true);
    }
    if (_jspx_th_c_005fchoose_005f3.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005fc_005fchoose.reuse(_jspx_th_c_005fchoose_005f3);
      return true;
    }
    _005fjspx_005ftagPool_005fc_005fchoose.reuse(_jspx_th_c_005fchoose_005f3);
    return false;
  }

  private boolean _jspx_meth_c_005fwhen_005f5(javax.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f3, javax.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:when
    org.apache.taglibs.standard.tag.rt.core.WhenTag _jspx_th_c_005fwhen_005f5 = (org.apache.taglibs.standard.tag.rt.core.WhenTag) _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.WhenTag.class);
    _jspx_th_c_005fwhen_005f5.setPageContext(_jspx_page_context);
    _jspx_th_c_005fwhen_005f5.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f3);
    // /contact_management.jsp(286,68) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
    _jspx_th_c_005fwhen_005f5.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${not empty message.repliedAt}", java.lang.Boolean.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false)).booleanValue());
    int _jspx_eval_c_005fwhen_005f5 = _jspx_th_c_005fwhen_005f5.doStartTag();
    if (_jspx_eval_c_005fwhen_005f5 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
      do {
        out.write("\n");
        out.write("                                                                        ");
        if (_jspx_meth_fmt_005fformatDate_005f1(_jspx_th_c_005fwhen_005f5, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
          return true;
        out.write("\n");
        out.write("                                                                    ");
        int evalDoAfterBody = _jspx_th_c_005fwhen_005f5.doAfterBody();
        if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
          break;
      } while (true);
    }
    if (_jspx_th_c_005fwhen_005f5.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f5);
      return true;
    }
    _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f5);
    return false;
  }

  private boolean _jspx_meth_fmt_005fformatDate_005f1(javax.servlet.jsp.tagext.JspTag _jspx_th_c_005fwhen_005f5, javax.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  fmt:formatDate
    org.apache.taglibs.standard.tag.rt.fmt.FormatDateTag _jspx_th_fmt_005fformatDate_005f1 = (org.apache.taglibs.standard.tag.rt.fmt.FormatDateTag) _005fjspx_005ftagPool_005ffmt_005fformatDate_0026_005fvalue_005fpattern_005fnobody.get(org.apache.taglibs.standard.tag.rt.fmt.FormatDateTag.class);
    _jspx_th_fmt_005fformatDate_005f1.setPageContext(_jspx_page_context);
    _jspx_th_fmt_005fformatDate_005f1.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fwhen_005f5);
    // /contact_management.jsp(287,72) name = value type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
    _jspx_th_fmt_005fformatDate_005f1.setValue((java.util.Date) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.repliedAt}", java.util.Date.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
    // /contact_management.jsp(287,72) name = pattern type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
    _jspx_th_fmt_005fformatDate_005f1.setPattern("dd/MM/yyyy HH:mm");
    int _jspx_eval_fmt_005fformatDate_005f1 = _jspx_th_fmt_005fformatDate_005f1.doStartTag();
    if (_jspx_th_fmt_005fformatDate_005f1.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005ffmt_005fformatDate_0026_005fvalue_005fpattern_005fnobody.reuse(_jspx_th_fmt_005fformatDate_005f1);
      return true;
    }
    _005fjspx_005ftagPool_005ffmt_005fformatDate_0026_005fvalue_005fpattern_005fnobody.reuse(_jspx_th_fmt_005fformatDate_005f1);
    return false;
  }

  private boolean _jspx_meth_c_005fotherwise_005f2(javax.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f3, javax.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:otherwise
    org.apache.taglibs.standard.tag.common.core.OtherwiseTag _jspx_th_c_005fotherwise_005f2 = (org.apache.taglibs.standard.tag.common.core.OtherwiseTag) _005fjspx_005ftagPool_005fc_005fotherwise.get(org.apache.taglibs.standard.tag.common.core.OtherwiseTag.class);
    _jspx_th_c_005fotherwise_005f2.setPageContext(_jspx_page_context);
    _jspx_th_c_005fotherwise_005f2.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f3);
    int _jspx_eval_c_005fotherwise_005f2 = _jspx_th_c_005fotherwise_005f2.doStartTag();
    if (_jspx_eval_c_005fotherwise_005f2 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
      do {
        out.write("\n");
        out.write("                                                                        <span class=\"text-muted\">-</span>\n");
        out.write("                                                                    ");
        int evalDoAfterBody = _jspx_th_c_005fotherwise_005f2.doAfterBody();
        if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
          break;
      } while (true);
    }
    if (_jspx_th_c_005fotherwise_005f2.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005fc_005fotherwise.reuse(_jspx_th_c_005fotherwise_005f2);
      return true;
    }
    _005fjspx_005ftagPool_005fc_005fotherwise.reuse(_jspx_th_c_005fotherwise_005f2);
    return false;
  }

  private boolean _jspx_meth_c_005fotherwise_005f3(javax.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f0, javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:otherwise
    org.apache.taglibs.standard.tag.common.core.OtherwiseTag _jspx_th_c_005fotherwise_005f3 = (org.apache.taglibs.standard.tag.common.core.OtherwiseTag) _005fjspx_005ftagPool_005fc_005fotherwise.get(org.apache.taglibs.standard.tag.common.core.OtherwiseTag.class);
    _jspx_th_c_005fotherwise_005f3.setPageContext(_jspx_page_context);
    _jspx_th_c_005fotherwise_005f3.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f0);
    int _jspx_eval_c_005fotherwise_005f3 = _jspx_th_c_005fotherwise_005f3.doStartTag();
    if (_jspx_eval_c_005fotherwise_005f3 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
      do {
        out.write("\n");
        out.write("                                                    <tr>\n");
        out.write("                                                        <td colspan=\"9\" class=\"text-center\">\n");
        out.write("                                                            <p class=\"text-muted\">Không có tin nhắn nào.</p>\n");
        out.write("                                                        </td>\n");
        out.write("                                                    </tr>\n");
        out.write("                                                ");
        int evalDoAfterBody = _jspx_th_c_005fotherwise_005f3.doAfterBody();
        if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
          break;
      } while (true);
    }
    if (_jspx_th_c_005fotherwise_005f3.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005fc_005fotherwise.reuse(_jspx_th_c_005fotherwise_005f3);
      return true;
    }
    _005fjspx_005ftagPool_005fc_005fotherwise.reuse(_jspx_th_c_005fotherwise_005f3);
    return false;
  }
}

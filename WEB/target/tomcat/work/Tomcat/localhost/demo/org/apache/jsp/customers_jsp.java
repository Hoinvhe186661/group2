/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2025-10-01 18:12:52 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class customers_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("<!DOCTYPE html>\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("    <meta charset=\"UTF-8\">\r\n");
      out.write("    <title>Bảng điều khiển | Quản lý khách hàng</title>\r\n");
      out.write("    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>\r\n");
      out.write("    \r\n");
      out.write("    <!-- bootstrap 3.0.2 -->\r\n");
      out.write("    <link href=\"css/bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n");
      out.write("    <!-- font Awesome -->\r\n");
      out.write("    <link href=\"css/font-awesome.min.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n");
      out.write("    <!-- Ionicons -->\r\n");
      out.write("    <link href=\"css/ionicons.min.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n");
      out.write("    <!-- DataTables -->\r\n");
      out.write("    <link href=\"css/datatables/dataTables.bootstrap.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n");
      out.write("    <!-- Theme style -->\r\n");
      out.write("    <link href=\"css/style.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n");
      out.write("    <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>\r\n");
      out.write("</head>\r\n");
      out.write("<body class=\"skin-black\">\r\n");
      out.write("    <!-- header logo: style can be found in header.less -->\r\n");
      out.write("    <header class=\"header\">\r\n");
      out.write("        <a href=\"admin.jsp\" class=\"logo\">\r\n");
      out.write("            Bảng điều khiển quản trị\r\n");
      out.write("        </a>\r\n");
      out.write("        <!-- Header Navbar: style can be found in header.less -->\r\n");
      out.write("        <nav class=\"navbar navbar-static-top\" role=\"navigation\">\r\n");
      out.write("            <!-- Sidebar toggle button-->\r\n");
      out.write("            <a href=\"#\" class=\"navbar-btn sidebar-toggle\" data-toggle=\"offcanvas\" role=\"button\">\r\n");
      out.write("                <span class=\"sr-only\">Toggle navigation</span>\r\n");
      out.write("                <span class=\"icon-bar\"></span>\r\n");
      out.write("                <span class=\"icon-bar\"></span>\r\n");
      out.write("                <span class=\"icon-bar\"></span>\r\n");
      out.write("            </a>\r\n");
      out.write("            <div class=\"navbar-right\">\r\n");
      out.write("                <ul class=\"nav navbar-nav\">\r\n");
      out.write("                    <!-- User Account: style can be found in dropdown.less -->\r\n");
      out.write("                    <li class=\"dropdown user user-menu\">\r\n");
      out.write("                        <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">\r\n");
      out.write("                            <i class=\"fa fa-user\"></i>\r\n");
      out.write("                            <span>Admin <i class=\"caret\"></i></span>\r\n");
      out.write("                        </a>\r\n");
      out.write("                        <ul class=\"dropdown-menu dropdown-custom dropdown-menu-right\">\r\n");
      out.write("                            <li class=\"dropdown-header text-center\">Tài khoản</li>\r\n");
      out.write("                            <li>\r\n");
      out.write("                                <a href=\"#\">\r\n");
      out.write("                                <i class=\"fa fa-user fa-fw pull-right\"></i>\r\n");
      out.write("                                    Hồ sơ\r\n");
      out.write("                                </a>\r\n");
      out.write("                                <a data-toggle=\"modal\" href=\"#modal-user-settings\">\r\n");
      out.write("                                <i class=\"fa fa-cog fa-fw pull-right\"></i>\r\n");
      out.write("                                    Cài đặt\r\n");
      out.write("                                </a>\r\n");
      out.write("                            </li>\r\n");
      out.write("                            <li class=\"divider\"></li>\r\n");
      out.write("                            <li>\r\n");
      out.write("                                <a href=\"../index.jsp\"><i class=\"fa fa-ban fa-fw pull-right\"></i> Đăng xuất</a>\r\n");
      out.write("                            </li>\r\n");
      out.write("                        </ul>\r\n");
      out.write("                    </li>\r\n");
      out.write("                </ul>\r\n");
      out.write("            </div>\r\n");
      out.write("        </nav>\r\n");
      out.write("    </header>\r\n");
      out.write("    \r\n");
      out.write("    <div class=\"wrapper row-offcanvas row-offcanvas-left\">\r\n");
      out.write("        <!-- Left side column. contains the logo and sidebar -->\r\n");
      out.write("        <aside class=\"left-side sidebar-offcanvas\">\r\n");
      out.write("            <!-- sidebar: style can be found in sidebar.less -->\r\n");
      out.write("            <section class=\"sidebar\">\r\n");
      out.write("                <!-- Sidebar user panel -->\r\n");
      out.write("                <div class=\"user-panel\">\r\n");
      out.write("                    <div class=\"pull-left image\">\r\n");
      out.write("                        <img src=\"img/26115.jpg\" class=\"img-circle\" alt=\"User Image\" />\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"pull-left info\">\r\n");
      out.write("                        <p>Xin chào, Admin</p>\r\n");
      out.write("                        <a href=\"#\"><i class=\"fa fa-circle text-success\"></i> Online</a>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("                <!-- sidebar menu: : style can be found in sidebar.less -->\r\n");
      out.write("                <ul class=\"sidebar-menu\">\r\n");
      out.write("                    <li>\r\n");
      out.write("                        <a href=\"admin.jsp\">\r\n");
      out.write("                            <i class=\"fa fa-dashboard\"></i> <span>Bảng điều khiển</span>\r\n");
      out.write("                        </a>\r\n");
      out.write("                    </li>\r\n");
      out.write("                    <li>\r\n");
      out.write("                        <a href=\"products.jsp\">\r\n");
      out.write("                            <i class=\"fa fa-shopping-cart\"></i> <span>Quản lý sản phẩm</span>\r\n");
      out.write("                        </a>\r\n");
      out.write("                    </li>\r\n");
      out.write("                    <li>\r\n");
      out.write("                        <a href=\"orders.jsp\">\r\n");
      out.write("                            <i class=\"fa fa-file-text-o\"></i> <span>Quản lý đơn hàng</span>\r\n");
      out.write("                        </a>\r\n");
      out.write("                    </li>\r\n");
      out.write("                    <li class=\"active\">\r\n");
      out.write("                        <a href=\"customers.jsp\">\r\n");
      out.write("                            <i class=\"fa fa-users\"></i> <span>Quản lý khách hàng</span>\r\n");
      out.write("                        </a>\r\n");
      out.write("                    </li>\r\n");
      out.write("                    <li>\r\n");
      out.write("                        <a href=\"reports.jsp\">\r\n");
      out.write("                            <i class=\"fa fa-bar-chart\"></i> <span>Báo cáo</span>\r\n");
      out.write("                        </a>\r\n");
      out.write("                    </li>\r\n");
      out.write("                    <li>\r\n");
      out.write("                        <a href=\"settings.jsp\">\r\n");
      out.write("                            <i class=\"fa fa-cog\"></i> <span>Cài đặt</span>\r\n");
      out.write("                        </a>\r\n");
      out.write("                    </li>\r\n");
      out.write("                </ul>\r\n");
      out.write("            </section>\r\n");
      out.write("            <!-- /.sidebar -->\r\n");
      out.write("        </aside>\r\n");
      out.write("\r\n");
      out.write("        <aside class=\"right-side\">\r\n");
      out.write("            <!-- Main content -->\r\n");
      out.write("            <section class=\"content\">\r\n");
      out.write("                <div class=\"row\">\r\n");
      out.write("                    <div class=\"col-xs-12\">\r\n");
      out.write("                        <div class=\"panel\">\r\n");
      out.write("                            <header class=\"panel-heading\">\r\n");
      out.write("                                <h3>Quản lý khách hàng</h3>\r\n");
      out.write("                                <div class=\"panel-tools\">\r\n");
      out.write("                                    <button class=\"btn btn-primary btn-sm\" data-toggle=\"modal\" data-target=\"#addCustomerModal\">\r\n");
      out.write("                                        <i class=\"fa fa-plus\"></i> Thêm khách hàng mới\r\n");
      out.write("                                    </button>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </header>\r\n");
      out.write("                            <div class=\"panel-body table-responsive\">\r\n");
      out.write("                                <table class=\"table table-hover\" id=\"customersTable\">\r\n");
      out.write("                                    <thead>\r\n");
      out.write("                                        <tr>\r\n");
      out.write("                                            <th>ID</th>\r\n");
      out.write("                                            <th>Mã khách hàng</th>\r\n");
      out.write("                                            <th>Tên công ty</th>\r\n");
      out.write("                                            <th>Người liên hệ</th>\r\n");
      out.write("                                            <th>Email</th>\r\n");
      out.write("                                            <th>Số điện thoại</th>\r\n");
      out.write("                                            <th>Địa chỉ</th>\r\n");
      out.write("                                            <th>Mã số thuế</th>\r\n");
      out.write("                                            <th>Loại khách hàng</th>\r\n");
      out.write("                                            <th>Trạng thái</th>\r\n");
      out.write("                                            <th>Thao tác</th>\r\n");
      out.write("                                        </tr>\r\n");
      out.write("                                    </thead>\r\n");
      out.write("                                    <tbody id=\"customersTableBody\">\r\n");
      out.write("                                        ");
      out.write("\r\n");
      out.write("                                        ");

                                            com.hlgenerator.dao.CustomerDAO dao = new com.hlgenerator.dao.CustomerDAO();
                                            java.util.List<com.hlgenerator.model.Customer> customers = dao.getAllCustomers();
                                            for (com.hlgenerator.model.Customer customer : customers) {
                                        
      out.write("\r\n");
      out.write("                                        <tr>\r\n");
      out.write("                                            <td>");
      out.print( customer.getId() );
      out.write("</td>\r\n");
      out.write("                                            <td>");
      out.print( customer.getCustomerCode() );
      out.write("</td>\r\n");
      out.write("                                            <td>");
      out.print( customer.getCompanyName() );
      out.write("</td>\r\n");
      out.write("                                            <td>");
      out.print( customer.getContactPerson() );
      out.write("</td>\r\n");
      out.write("                                            <td>");
      out.print( customer.getEmail() );
      out.write("</td>\r\n");
      out.write("                                            <td>");
      out.print( customer.getPhone() );
      out.write("</td>\r\n");
      out.write("                                            <td>");
      out.print( customer.getAddress() );
      out.write("</td>\r\n");
      out.write("                                            <td>");
      out.print( customer.getTaxCode() );
      out.write("</td>\r\n");
      out.write("                                            <td>");
      out.print( "company".equals(customer.getCustomerType()) ? "Doanh nghiệp" : "Cá nhân" );
      out.write("</td>\r\n");
      out.write("                                            <td>");
      out.print( "active".equals(customer.getStatus()) ? "Hoạt động" : "Tạm khóa" );
      out.write("</td>\r\n");
      out.write("                                            <td>\r\n");
      out.write("                                                <button class=\"btn btn-info btn-xs\" onclick=\"viewCustomer('");
      out.print( customer.getId() );
      out.write("')\"><i class=\"fa fa-eye\"></i> Xem</button>\r\n");
      out.write("                                                <button class=\"btn btn-warning btn-xs\" onclick=\"editCustomer('");
      out.print( customer.getId() );
      out.write("')\"><i class=\"fa fa-edit\"></i> Sửa</button>\r\n");
      out.write("                                                ");
 if ("active".equals(customer.getStatus())) { 
      out.write("\r\n");
      out.write("                                                    <button class=\"btn btn-danger btn-xs\" onclick=\"deleteCustomer('");
      out.print( customer.getId() );
      out.write("')\"><i class=\"fa fa-trash\"></i> Xóa</button>\r\n");
      out.write("                                                ");
 } else { 
      out.write("\r\n");
      out.write("                                                    <button class=\"btn btn-success btn-xs\" onclick=\"activateCustomer('");
      out.print( customer.getId() );
      out.write("')\"><i class=\"fa fa-unlock\"></i> Kích hoạt</button>\r\n");
      out.write("                                                ");
 } 
      out.write("\r\n");
      out.write("                                            </td>\r\n");
      out.write("                                        </tr>\r\n");
      out.write("                                        ");
 } 
      out.write("\r\n");
      out.write("                                    </tbody>\r\n");
      out.write("                                </table>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </section><!-- /.content -->\r\n");
      out.write("        </aside><!-- /.right-side -->\r\n");
      out.write("    </div><!-- ./wrapper -->\r\n");
      out.write("\r\n");
      out.write("    <!-- Modal thêm khách hàng -->\r\n");
      out.write("    <div class=\"modal fade\" id=\"addCustomerModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"addCustomerModalLabel\">\r\n");
      out.write("        <div class=\"modal-dialog\" role=\"document\">\r\n");
      out.write("            <div class=\"modal-content\">\r\n");
      out.write("                <div class=\"modal-header\">\r\n");
      out.write("                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n");
      out.write("                        <span aria-hidden=\"true\">&times;</span>\r\n");
      out.write("                    </button>\r\n");
      out.write("                    <h4 class=\"modal-title\" id=\"addCustomerModalLabel\">Thêm khách hàng mới</h4>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"modal-body\">\r\n");
      out.write("                    <form id=\"addCustomerForm\">\r\n");
      out.write("                        <div class=\"form-group\">\r\n");
      out.write("                            <label for=\"customerCode\">Mã khách hàng:</label>\r\n");
      out.write("                            <input type=\"text\" class=\"form-control\" id=\"customerCode\" required>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"form-group\">\r\n");
      out.write("                            <label for=\"companyName\">Tên công ty:</label>\r\n");
      out.write("                            <input type=\"text\" class=\"form-control\" id=\"companyName\" required>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"form-group\">\r\n");
      out.write("                            <label for=\"userContract\">Người liên hệ:</label>\r\n");
      out.write("                            <input type=\"text\" class=\"form-control\" id=\"userContract\" required>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"form-group\">\r\n");
      out.write("                            <label for=\"customerEmail\">Email:</label>\r\n");
      out.write("                            <input type=\"email\" class=\"form-control\" id=\"customerEmail\" required>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"form-group\">\r\n");
      out.write("                            <label for=\"customerPhone\">Số điện thoại:</label>\r\n");
      out.write("                            <input type=\"tel\" class=\"form-control\" id=\"customerPhone\" required>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"form-group\">\r\n");
      out.write("                            <label for=\"customerAddress\">Địa chỉ:</label>\r\n");
      out.write("                            <textarea class=\"form-control\" id=\"customerAddress\" rows=\"3\" required></textarea>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"form-group\">\r\n");
      out.write("                            <label for=\"taxCode\">Mã số thuế:</label>\r\n");
      out.write("                            <input type=\"text\" class=\"form-control\" id=\"taxCode\">\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"form-group\">\r\n");
      out.write("                            <label for=\"customerType\">Loại khách hàng:</label>\r\n");
      out.write("                            <select class=\"form-control\" id=\"customerType\" required>\r\n");
      out.write("                                <option value=\"\">Chọn loại khách hàng</option>\r\n");
      out.write("                                <option value=\"individual\">Cá nhân</option>\r\n");
      out.write("                                <option value=\"business\">Doanh nghiệp</option>\r\n");
      out.write("                            </select>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </form>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"modal-footer\">\r\n");
      out.write("                    <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Hủy</button>\r\n");
      out.write("                    <button type=\"button\" class=\"btn btn-primary\" onclick=\"saveCustomer()\">Lưu khách hàng</button>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("    </div>\r\n");
      out.write("\r\n");
      out.write("    <!-- Modal xem chi tiết khách hàng -->\r\n");
      out.write("    <div class=\"modal fade\" id=\"customerDetailModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"customerDetailModalLabel\">\r\n");
      out.write("        <div class=\"modal-dialog modal-lg\" role=\"document\">\r\n");
      out.write("            <div class=\"modal-content\">\r\n");
      out.write("                <div class=\"modal-header\">\r\n");
      out.write("                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n");
      out.write("                        <span aria-hidden=\"true\">&times;</span>\r\n");
      out.write("                    </button>\r\n");
      out.write("                    <h4 class=\"modal-title\" id=\"customerDetailModalLabel\">Chi tiết khách hàng</h4>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"modal-body\">\r\n");
      out.write("                    <div class=\"row\">\r\n");
      out.write("                        <div class=\"col-md-6\">\r\n");
      out.write("                            <h5>Thông tin khách hàng</h5>\r\n");
      out.write("                            <p><strong>ID:</strong> <span id=\"detailCustomerId\"></span></p>\r\n");
      out.write("                            <p><strong>Mã khách hàng:</strong> <span id=\"detailCustomerCode\"></span></p>\r\n");
      out.write("                            <p><strong>Tên công ty:</strong> <span id=\"detailCompanyName\"></span></p>\r\n");
      out.write("                            <p><strong>Người liên hệ:</strong> <span id=\"detailUserContract\"></span></p>\r\n");
      out.write("                            <p><strong>Email:</strong> <span id=\"detailCustomerEmail\"></span></p>\r\n");
      out.write("                            <p><strong>Số điện thoại:</strong> <span id=\"detailCustomerPhone\"></span></p>\r\n");
      out.write("                            <p><strong>Địa chỉ:</strong> <span id=\"detailCustomerAddress\"></span></p>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"col-md-6\">\r\n");
      out.write("                            <h5>Thông tin bổ sung</h5>\r\n");
      out.write("                            <p><strong>Mã số thuế:</strong> <span id=\"detailTaxCode\"></span></p>\r\n");
      out.write("                            <p><strong>Loại khách hàng:</strong> <span id=\"detailCustomerType\"></span></p>\r\n");
      out.write("                            <p><strong>Ngày đăng ký:</strong> <span id=\"detailCustomerJoinDate\"></span></p>\r\n");
      out.write("                            <p><strong>Trạng thái:</strong> <span id=\"detailCustomerStatus\"></span></p>\r\n");
      out.write("                            <hr>\r\n");
      out.write("                            <h5>Thống kê mua hàng</h5>\r\n");
      out.write("                            <p><strong>Tổng đơn hàng:</strong> <span id=\"detailTotalOrders\"></span></p>\r\n");
      out.write("                            <p><strong>Tổng chi tiêu:</strong> <span id=\"detailTotalSpent\"></span></p>\r\n");
      out.write("                            <p><strong>Đơn hàng gần nhất:</strong> <span id=\"detailLastOrder\"></span></p>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <hr>\r\n");
      out.write("                    <h5>Lịch sử đơn hàng</h5>\r\n");
      out.write("                    <div id=\"customerOrders\"></div>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"modal-footer\">\r\n");
      out.write("                    <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Đóng</button>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("    </div>\r\n");
      out.write("\r\n");
      out.write("    <!-- jQuery 2.0.2 -->\r\n");
      out.write("    <script src=\"http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js\"></script>\r\n");
      out.write("    <script src=\"js/jquery.min.js\" type=\"text/javascript\"></script>\r\n");
      out.write("    <!-- jQuery UI 1.10.3 -->\r\n");
      out.write("    <script src=\"js/jquery-ui-1.10.3.min.js\" type=\"text/javascript\"></script>\r\n");
      out.write("    <!-- Bootstrap -->\r\n");
      out.write("    <script src=\"js/bootstrap.min.js\" type=\"text/javascript\"></script>\r\n");
      out.write("    <!-- DataTables -->\r\n");
      out.write("    <script src=\"js/plugins/datatables/jquery.dataTables.js\" type=\"text/javascript\"></script>\r\n");
      out.write("    <script src=\"js/plugins/datatables/dataTables.bootstrap.js\" type=\"text/javascript\"></script>\r\n");
      out.write("    <!-- Director App -->\r\n");
      out.write("    <script src=\"js/Director/app.js\" type=\"text/javascript\"></script>\r\n");
      out.write("\r\n");
      out.write("    <script type=\"text/javascript\">\r\n");
      out.write("        var customersTable;\r\n");
      out.write("        var currentEditingCustomer = null;\r\n");
      out.write("\r\n");
      out.write("        $(document).ready(function() {\r\n");
      out.write("            // Initialize DataTable\r\n");
      out.write("            customersTable = $('#customersTable').DataTable({\r\n");
      out.write("                \"language\": {\r\n");
      out.write("                    \"url\": \"//cdn.datatables.net/plug-ins/1.10.25/i18n/Vietnamese.json\"\r\n");
      out.write("                },\r\n");
      out.write("                \"processing\": true,\r\n");
      out.write("                \"serverSide\": false,\r\n");
      out.write("                \"ajax\": {\r\n");
      out.write("                    \"url\": \"../api/customers?action=list\",\r\n");
      out.write("                    \"type\": \"GET\",\r\n");
      out.write("                    \"dataSrc\": \"data\"\r\n");
      out.write("                },\r\n");
      out.write("                \"columns\": [\r\n");
      out.write("                    { \"data\": \"id\" },\r\n");
      out.write("                    { \"data\": \"customerCode\" },\r\n");
      out.write("                    { \"data\": \"companyName\" },\r\n");
      out.write("                    { \"data\": \"contactPerson\" },\r\n");
      out.write("                    { \"data\": \"email\" },\r\n");
      out.write("                    { \"data\": \"phone\" },\r\n");
      out.write("                    { \"data\": \"address\" },\r\n");
      out.write("                    { \"data\": \"taxCode\" },\r\n");
      out.write("                    { \r\n");
      out.write("                        \"data\": \"customerType\",\r\n");
      out.write("                        \"render\": function(data, type, row) {\r\n");
      out.write("                            var labelClass = data === 'business' ? 'label-primary' : 'label-info';\r\n");
      out.write("                            var labelText = data === 'business' ? 'Doanh nghiệp' : 'Cá nhân';\r\n");
      out.write("                            return '<span class=\"label ' + labelClass + '\">' + labelText + '</span>';\r\n");
      out.write("                        }\r\n");
      out.write("                    },\r\n");
      out.write("                    {\r\n");
      out.write("                        \"data\": null,\r\n");
      out.write("                        \"render\": function(data, type, row) {\r\n");
      out.write("                            var buttons = '<button class=\"btn btn-info btn-xs\" onclick=\"viewCustomer(' + row.id + ')\">' +\r\n");
      out.write("                                        '<i class=\"fa fa-eye\"></i> Xem</button> ';\r\n");
      out.write("                            \r\n");
      out.write("                            buttons += '<button class=\"btn btn-warning btn-xs\" onclick=\"editCustomer(' + row.id + ')\">' +\r\n");
      out.write("                                      '<i class=\"fa fa-edit\"></i> Sửa</button> ';\r\n");
      out.write("                            \r\n");
      out.write("                            if (row.status === 'active') {\r\n");
      out.write("                                buttons += '<button class=\"btn btn-danger btn-xs\" onclick=\"deleteCustomer(' + row.id + ')\">' +\r\n");
      out.write("                                          '<i class=\"fa fa-trash\"></i> Xóa</button>';\r\n");
      out.write("                            } else {\r\n");
      out.write("                                buttons += '<button class=\"btn btn-success btn-xs\" onclick=\"activateCustomer(' + row.id + ')\">' +\r\n");
      out.write("                                          '<i class=\"fa fa-unlock\"></i> Kích hoạt</button>';\r\n");
      out.write("                            }\r\n");
      out.write("                            \r\n");
      out.write("                            return buttons;\r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("                ]\r\n");
      out.write("            });\r\n");
      out.write("\r\n");
      out.write("            // Load initial data\r\n");
      out.write("            loadCustomers();\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("        function loadCustomers() {\r\n");
      out.write("            $.ajax({\r\n");
      out.write("                url: '../api/customers?action=list',\r\n");
      out.write("                type: 'GET',\r\n");
      out.write("                dataType: 'json',\r\n");
      out.write("                success: function(response) {\r\n");
      out.write("                    if (response.success) {\r\n");
      out.write("                        populateTable(response.data);\r\n");
      out.write("                    } else {\r\n");
      out.write("                        showAlert('Lỗi khi tải dữ liệu: ' + response.message, 'danger');\r\n");
      out.write("                    }\r\n");
      out.write("                },\r\n");
      out.write("                error: function() {\r\n");
      out.write("                    showAlert('Lỗi kết nối đến server', 'danger');\r\n");
      out.write("                }\r\n");
      out.write("            });\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function populateTable(customers) {\r\n");
      out.write("            var tbody = $('#customersTableBody');\r\n");
      out.write("            tbody.empty();\r\n");
      out.write("            \r\n");
      out.write("            customers.forEach(function(customer) {\r\n");
      out.write("                var row = '<tr>' +\r\n");
      out.write("                    '<td>' + customer.id + '</td>' +\r\n");
      out.write("                    '<td>' + customer.customerCode + '</td>' +\r\n");
      out.write("                    '<td>' + customer.companyName + '</td>' +\r\n");
      out.write("                    '<td>' + customer.contactPerson + '</td>' +\r\n");
      out.write("                    '<td>' + customer.email + '</td>' +\r\n");
      out.write("                    '<td>' + customer.phone + '</td>' +\r\n");
      out.write("                    '<td>' + customer.address + '</td>' +\r\n");
      out.write("                    '<td>' + (customer.taxCode || '-') + '</td>' +\r\n");
      out.write("                    '<td>' + getCustomerTypeLabel(customer.customerType) + '</td>' +\r\n");
      out.write("                    '<td>' + getActionButtons(customer) + '</td>' +\r\n");
      out.write("                    '</tr>';\r\n");
      out.write("                tbody.append(row);\r\n");
      out.write("            });\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function getCustomerTypeLabel(type) {\r\n");
      out.write("            if (type === 'business') {\r\n");
      out.write("                return '<span class=\"label label-primary\">Doanh nghiệp</span>';\r\n");
      out.write("            } else {\r\n");
      out.write("                return '<span class=\"label label-info\">Cá nhân</span>';\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function getActionButtons(customer) {\r\n");
      out.write("            var buttons = '<button class=\"btn btn-info btn-xs\" onclick=\"viewCustomer(' + customer.id + ')\">' +\r\n");
      out.write("                         '<i class=\"fa fa-eye\"></i> Xem</button> ';\r\n");
      out.write("            \r\n");
      out.write("            buttons += '<button class=\"btn btn-warning btn-xs\" onclick=\"editCustomer(' + customer.id + ')\">' +\r\n");
      out.write("                      '<i class=\"fa fa-edit\"></i> Sửa</button> ';\r\n");
      out.write("            \r\n");
      out.write("            if (customer.status === 'active') {\r\n");
      out.write("                buttons += '<button class=\"btn btn-danger btn-xs\" onclick=\"deleteCustomer(' + customer.id + ')\">' +\r\n");
      out.write("                          '<i class=\"fa fa-trash\"></i> Xóa</button>';\r\n");
      out.write("            } else {\r\n");
      out.write("                buttons += '<button class=\"btn btn-success btn-xs\" onclick=\"activateCustomer(' + customer.id + ')\">' +\r\n");
      out.write("                          '<i class=\"fa fa-unlock\"></i> Kích hoạt</button>';\r\n");
      out.write("            }\r\n");
      out.write("            \r\n");
      out.write("            return buttons;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function viewCustomer(id) {\r\n");
      out.write("            $.ajax({\r\n");
      out.write("                url: '../api/customers?action=get&id=' + id,\r\n");
      out.write("                type: 'GET',\r\n");
      out.write("                dataType: 'json',\r\n");
      out.write("                success: function(response) {\r\n");
      out.write("                    if (response.success) {\r\n");
      out.write("                        var customer = response.data;\r\n");
      out.write("                        populateCustomerDetail(customer);\r\n");
      out.write("                        $('#customerDetailModal').modal('show');\r\n");
      out.write("                    } else {\r\n");
      out.write("                        showAlert('Không thể tải thông tin khách hàng: ' + response.message, 'danger');\r\n");
      out.write("                    }\r\n");
      out.write("                },\r\n");
      out.write("                error: function() {\r\n");
      out.write("                    showAlert('Lỗi kết nối đến server', 'danger');\r\n");
      out.write("                }\r\n");
      out.write("            });\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function populateCustomerDetail(customer) {\r\n");
      out.write("            document.getElementById('detailCustomerId').textContent = customer.id;\r\n");
      out.write("            document.getElementById('detailCustomerCode').textContent = customer.customerCode;\r\n");
      out.write("            document.getElementById('detailCompanyName').textContent = customer.companyName;\r\n");
      out.write("            document.getElementById('detailUserContract').textContent = customer.contactPerson;\r\n");
      out.write("            document.getElementById('detailCustomerEmail').textContent = customer.email;\r\n");
      out.write("            document.getElementById('detailCustomerPhone').textContent = customer.phone;\r\n");
      out.write("            document.getElementById('detailCustomerAddress').textContent = customer.address;\r\n");
      out.write("            document.getElementById('detailTaxCode').textContent = customer.taxCode || '-';\r\n");
      out.write("            document.getElementById('detailCustomerType').innerHTML = getCustomerTypeLabel(customer.customerType);\r\n");
      out.write("            document.getElementById('detailCustomerJoinDate').textContent = formatDate(customer.createdAt);\r\n");
      out.write("            document.getElementById('detailCustomerStatus').innerHTML = getStatusLabel(customer.status);\r\n");
      out.write("            \r\n");
      out.write("            // Mock data for orders (in real app, this would come from another API)\r\n");
      out.write("            document.getElementById('detailTotalOrders').textContent = '0';\r\n");
      out.write("            document.getElementById('detailTotalSpent').textContent = '0 VNĐ';\r\n");
      out.write("            document.getElementById('detailLastOrder').textContent = '-';\r\n");
      out.write("            \r\n");
      out.write("            document.getElementById('customerOrders').innerHTML = '<p class=\"text-muted\">Chưa có đơn hàng nào</p>';\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function getStatusLabel(status) {\r\n");
      out.write("            if (status === 'active') {\r\n");
      out.write("                return '<span class=\"label label-success\">Hoạt động</span>';\r\n");
      out.write("            } else {\r\n");
      out.write("                return '<span class=\"label label-warning\">Tạm khóa</span>';\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function formatDate(dateString) {\r\n");
      out.write("            if (!dateString) return '-';\r\n");
      out.write("            var date = new Date(dateString);\r\n");
      out.write("            return date.toLocaleDateString('vi-VN');\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function editCustomer(id) {\r\n");
      out.write("            $.ajax({\r\n");
      out.write("                url: '../api/customers?action=get&id=' + id,\r\n");
      out.write("                type: 'GET',\r\n");
      out.write("                dataType: 'json',\r\n");
      out.write("                success: function(response) {\r\n");
      out.write("                    if (response.success) {\r\n");
      out.write("                        var customer = response.data;\r\n");
      out.write("                        populateEditForm(customer);\r\n");
      out.write("                        currentEditingCustomer = customer;\r\n");
      out.write("                        $('#addCustomerModal').modal('show');\r\n");
      out.write("                        $('#addCustomerModalLabel').text('Chỉnh sửa khách hàng');\r\n");
      out.write("                    } else {\r\n");
      out.write("                        showAlert('Không thể tải thông tin khách hàng: ' + response.message, 'danger');\r\n");
      out.write("                    }\r\n");
      out.write("                },\r\n");
      out.write("                error: function() {\r\n");
      out.write("                    showAlert('Lỗi kết nối đến server', 'danger');\r\n");
      out.write("                }\r\n");
      out.write("            });\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function populateEditForm(customer) {\r\n");
      out.write("            document.getElementById('customerCode').value = customer.customerCode;\r\n");
      out.write("            document.getElementById('companyName').value = customer.companyName;\r\n");
      out.write("            document.getElementById('userContract').value = customer.contactPerson;\r\n");
      out.write("            document.getElementById('customerEmail').value = customer.email;\r\n");
      out.write("            document.getElementById('customerPhone').value = customer.phone;\r\n");
      out.write("            document.getElementById('customerAddress').value = customer.address;\r\n");
      out.write("            document.getElementById('taxCode').value = customer.taxCode || '';\r\n");
      out.write("            document.getElementById('customerType').value = customer.customerType;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function deleteCustomer(id) {\r\n");
      out.write("            if (confirm('Bạn có chắc chắn muốn xóa khách hàng này?')) {\r\n");
      out.write("                $.ajax({\r\n");
      out.write("                    url: '../api/customers',\r\n");
      out.write("                    type: 'POST',\r\n");
      out.write("                    data: {\r\n");
      out.write("                        action: 'delete',\r\n");
      out.write("                        id: id\r\n");
      out.write("                    },\r\n");
      out.write("                    dataType: 'json',\r\n");
      out.write("                    success: function(response) {\r\n");
      out.write("                        if (response.success) {\r\n");
      out.write("                            showAlert('Đã xóa khách hàng thành công', 'success');\r\n");
      out.write("                            loadCustomers();\r\n");
      out.write("                        } else {\r\n");
      out.write("                            showAlert('Lỗi khi xóa khách hàng: ' + response.message, 'danger');\r\n");
      out.write("                        }\r\n");
      out.write("                    },\r\n");
      out.write("                    error: function() {\r\n");
      out.write("                        showAlert('Lỗi kết nối đến server', 'danger');\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function activateCustomer(id) {\r\n");
      out.write("            if (confirm('Bạn có chắc chắn muốn kích hoạt khách hàng này?')) {\r\n");
      out.write("                $.ajax({\r\n");
      out.write("                    url: '../api/customers',\r\n");
      out.write("                    type: 'POST',\r\n");
      out.write("                    data: {\r\n");
      out.write("                        action: 'activate',\r\n");
      out.write("                        id: id\r\n");
      out.write("                    },\r\n");
      out.write("                    dataType: 'json',\r\n");
      out.write("                    success: function(response) {\r\n");
      out.write("                        if (response.success) {\r\n");
      out.write("                            showAlert('Đã kích hoạt khách hàng thành công', 'success');\r\n");
      out.write("                            loadCustomers();\r\n");
      out.write("                        } else {\r\n");
      out.write("                            showAlert('Lỗi khi kích hoạt khách hàng: ' + response.message, 'danger');\r\n");
      out.write("                        }\r\n");
      out.write("                    },\r\n");
      out.write("                    error: function() {\r\n");
      out.write("                        showAlert('Lỗi kết nối đến server', 'danger');\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function saveCustomer() {\r\n");
      out.write("            var customerCode = document.getElementById('customerCode').value;\r\n");
      out.write("            var companyName = document.getElementById('companyName').value;\r\n");
      out.write("            var userContract = document.getElementById('userContract').value;\r\n");
      out.write("            var customerEmail = document.getElementById('customerEmail').value;\r\n");
      out.write("            var customerPhone = document.getElementById('customerPhone').value;\r\n");
      out.write("            var customerAddress = document.getElementById('customerAddress').value;\r\n");
      out.write("            var taxCode = document.getElementById('taxCode').value;\r\n");
      out.write("            var customerType = document.getElementById('customerType').value;\r\n");
      out.write("\r\n");
      out.write("            if (!customerCode || !companyName || !userContract || !customerEmail || !customerPhone || !customerAddress || !customerType) {\r\n");
      out.write("                showAlert('Vui lòng điền đầy đủ thông tin bắt buộc', 'warning');\r\n");
      out.write("                return;\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            var formData = {\r\n");
      out.write("                customerCode: customerCode,\r\n");
      out.write("                companyName: companyName,\r\n");
      out.write("                userContract: userContract,\r\n");
      out.write("                customerEmail: customerEmail,\r\n");
      out.write("                customerPhone: customerPhone,\r\n");
      out.write("                customerAddress: customerAddress,\r\n");
      out.write("                taxCode: taxCode,\r\n");
      out.write("                customerType: customerType\r\n");
      out.write("            };\r\n");
      out.write("\r\n");
      out.write("            var url = '../api/customers';\r\n");
      out.write("            var action = currentEditingCustomer ? 'update' : 'add';\r\n");
      out.write("            formData.action = action;\r\n");
      out.write("            \r\n");
      out.write("            if (currentEditingCustomer) {\r\n");
      out.write("                formData.id = currentEditingCustomer.id;\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            $.ajax({\r\n");
      out.write("                url: url,\r\n");
      out.write("                type: 'POST',\r\n");
      out.write("                data: formData,\r\n");
      out.write("                dataType: 'json',\r\n");
      out.write("                success: function(response) {\r\n");
      out.write("                    if (response.success) {\r\n");
      out.write("                        showAlert(response.message, 'success');\r\n");
      out.write("                        $('#addCustomerModal').modal('hide');\r\n");
      out.write("                        document.getElementById('addCustomerForm').reset();\r\n");
      out.write("                        currentEditingCustomer = null;\r\n");
      out.write("                        $('#addCustomerModalLabel').text('Thêm khách hàng mới');\r\n");
      out.write("                        loadCustomers();\r\n");
      out.write("                    } else {\r\n");
      out.write("                        showAlert('Lỗi: ' + response.message, 'danger');\r\n");
      out.write("                    }\r\n");
      out.write("                },\r\n");
      out.write("                error: function() {\r\n");
      out.write("                    showAlert('Lỗi kết nối đến server', 'danger');\r\n");
      out.write("                }\r\n");
      out.write("            });\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function showAlert(message, type) {\r\n");
      out.write("            var alertClass = 'alert-' + type;\r\n");
      out.write("            var alertHtml = '<div class=\"alert ' + alertClass + ' alert-dismissible fade in\" role=\"alert\">' +\r\n");
      out.write("                           '<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">' +\r\n");
      out.write("                           '<span aria-hidden=\"true\">&times;</span></button>' +\r\n");
      out.write("                           message + '</div>';\r\n");
      out.write("            \r\n");
      out.write("            // Remove existing alerts\r\n");
      out.write("            $('.alert').remove();\r\n");
      out.write("            \r\n");
      out.write("            // Add new alert\r\n");
      out.write("            $('.content').prepend(alertHtml);\r\n");
      out.write("            \r\n");
      out.write("            // Auto remove after 5 seconds\r\n");
      out.write("            setTimeout(function() {\r\n");
      out.write("                $('.alert').fadeOut();\r\n");
      out.write("            }, 5000);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        // Reset form when modal is closed\r\n");
      out.write("        $('#addCustomerModal').on('hidden.bs.modal', function() {\r\n");
      out.write("            document.getElementById('addCustomerForm').reset();\r\n");
      out.write("            currentEditingCustomer = null;\r\n");
      out.write("            $('#addCustomerModalLabel').text('Thêm khách hàng mới');\r\n");
      out.write("        });\r\n");
      out.write("    </script>\r\n");
      out.write("</body>\r\n");
      out.write("</html>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
